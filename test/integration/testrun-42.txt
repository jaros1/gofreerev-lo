testrun-42 - remote remote comment

comment deleted in client 1 on app 1 - replicate changed/deleted comment to client 2 on app 2


client 2:
GiftService.verify_comments_add: added cid 14340368758546066205 to verify comments buffer
GiftService.receive_message_send_gifts: Waiting for 0 gifts and 1 comments to be server validated.
GiftService.receive_message_send_gifts: mailbox.read.length = 1
GiftService.receive_message_send_gifts: verify_gifts = []
GiftService.receive_message_send_gifts: verify_comments = [{"gid":"14335999822639189665","comment":{"cid":"14340368758546066205","user_ids":[3],"currency":"usd","comment":"client 1 => client 2 (f)","created_at_client":1434036875,"created_at_server":1,"deleted_at_client":1434090850,"sha256":"SZÏ4\u00141;T3Váþ²ÒÕ|Á}|Syj3éJíàD","in_verify_comments":1434090909}}]
GiftService.process_messages: mailbox.read.length = 1
GiftService.verify_comments_request: verify_comments.length = 1
GiftService.verify_comments_request: 1 new comment verification requests sent to server.

NavCtrl.ping: Error in JSON ping request. ping request was not sent to server.
NavCtrl.ping: request: {"client_userid":1,"sid":"14340905112638845147","client_timestamp":1434090911140,"verify_comments":[{"cid":"14340368758546066205","sha256":"Âð¤¨sô)²{çðÜÿÀÉêøLpªîx<É ÿøý\u0000","user_ids":[3],"sha256_deleted":"«\u000bòø¶\u0010x%ÞMNÝ^N\u0005\u0005@OÜ´\u0010XãyÌJ","server_id":1,"seq":-15}]}
NavCtrl.ping: schema: {"type":"object","title":"Send requests to server and send messages to other clients","description":"Ping request from client to server once every <interval> milliseconds. All gifts and comments must have a server side sha256 signature. Public keys and messages are used in encrypted client to client communication","properties":{"client_userid":{"type":"integer","minimum":1,"maximum":100},"client_timestamp":{"type":"integer","minimum":1433319253000,"maximum":1465028053000},"sid":{"type":"string","pattern":"^(146502805[0-3]|14650280[0-4][0-9]|146502[0-7][0-9]{3}|14650[01][0-9]{4}|146[0-4][0-9]{6}|14[0-5][0-9]{7}|139[0-9]{7}|1389[0-9]{6}|1388[6-9][0-9]{5}|13885[4-9][0-9]{4}|138853[5-9][0-9]{3}|1388534[4-9][0-9]{2})[0-9]{10}$"},"new_gifts":{"type":"array","title":"Array with newly created gifts on client","description":"Array with meta-data for newly created gifts on client used for creation of server side sha256 signatures. Gid and a server side sha256 signature is saved on server","items":{"type":"object","properties":{"gid":{"type":"string","pattern":"^(146502805[0-3]|14650280[0-4][0-9]|146502[0-7][0-9]{3}|14650[01][0-9]{4}|146[0-4][0-9]{6}|14[0-5][0-9]{7}|139[0-9]{7}|1389[0-9]{6}|1388[6-9][0-9]{5}|13885[4-9][0-9]{4}|138853[5-9][0-9]{3}|1388534[4-9][0-9]{2})[0-9]{10}$"},"sha256":{"type":"string","maxLength":32},"giver_user_ids":{"type":["NilClass","array"],"items":{"type":"integer"}},"receiver_user_ids":{"type":["NilClass","array"],"items":{"type":"integer"}}},"required":["gid","sha256"],"additionalProperties":false},"minItems":1},"new_servers":{"type":"array","title":"Array with sha256 signatures for unknown servers","items":{"type":"string"}},"verify_gifts":{"type":"array","title":"Array with gifts verifications requests (gifts received from other clients)","description":"Array with meta-data for gifts received from other clients. Server checks if server side sha256 value is valid (gift information is unchanged)","items":{"type":"object","properties":{"seq":{"type":"integer"},"server_id":{"type":"integer","minimum":1},"gid":{"type":"string","pattern":"^(146502805[0-3]|14650280[0-4][0-9]|146502[0-7][0-9]{3}|14650[01][0-9]{4}|146[0-4][0-9]{6}|14[0-5][0-9]{7}|139[0-9]{7}|1389[0-9]{6}|1388[6-9][0-9]{5}|13885[4-9][0-9]{4}|138853[5-9][0-9]{3}|1388534[4-9][0-9]{2})[0-9]{10}$"},"sha256":{"type":"string","maxLength":32},"sha256_deleted":{"type":"string","maxLength":32},"sha256_accepted":{"type":"string","maxLength":32},"giver_user_ids":{"type":["NilClass","array"],"items":{"type":"integer"}},"receiver_user_ids":{"type":["NilClass","array"],"items":{"type":"integer"}}},"required":["seq","gid","sha256"],"additionalProperties":false},"minItems":1},"delete_gifts":{"type":"array","title":"Array with newly deleted gifts on client for creation of a server side sha256 deleted signature. ","description":"Array with meta-data for deleted gifts. Client side sha256_accepted value must be supplied when deleting an closed deal with both giver and receiver. A server side sha256 deleted signature is saved on server","items":{"type":"object","properties":{"gid":{"type":"string","pattern":"^(146502805[0-3]|14650280[0-4][0-9]|146502[0-7][0-9]{3}|14650[01][0-9]{4}|146[0-4][0-9]{6}|14[0-5][0-9]{7}|139[0-9]{7}|1389[0-9]{6}|1388[6-9][0-9]{5}|13885[4-9][0-9]{4}|138853[5-9][0-9]{3}|1388534[4-9][0-9]{2})[0-9]{10}$"},"sha256":{"type":"string","maxLength":32},"sha256_deleted":{"type":"string","maxLength":32},"sha256_accepted":{"type":"string","maxLength":32},"giver_user_ids":{"type":["NilClass","array"],"items":{"type":"integer"}},"receiver_user_ids":{"type":["NilClass","array"],"items":{"type":"integer"}}},"required":["gid","sha256","sha256_deleted"],"additionalProperties":false},"minItems":1},"new_comments":{"type":"array","items":{"type":"object","properties":{"cid":{"type":"string","pattern":"^(146502805[0-3]|14650280[0-4][0-9]|146502[0-7][0-9]{3}|14650[01][0-9]{4}|146[0-4][0-9]{6}|14[0-5][0-9]{7}|139[0-9]{7}|1389[0-9]{6}|1388[6-9][0-9]{5}|13885[4-9][0-9]{4}|138853[5-9][0-9]{3}|1388534[4-9][0-9]{2})[0-9]{10}$"},"sha256":{"type":"string","maxLength":32},"user_ids":{"type":"array","items":{"type":"integer"}}},"required":["cid","sha256","user_ids"],"additionalProperties":false},"minItems":1},"verify_comments":{"type":"array","items":{"type":"object","properties":{"seq":{"type":"integer"},"server_id":{"type":"integer","minimum":1},"cid":{"type":"string","pattern":"^(146502805[0-3]|14650280[0-4][0-9]|146502[0-7][0-9]{3}|14650[01][0-9]{4}|146[0-4][0-9]{6}|14[0-5][0-9]{7}|139[0-9]{7}|1389[0-9]{6}|1388[6-9][0-9]{5}|13885[4-9][0-9]{4}|138853[5-9][0-9]{3}|1388534[4-9][0-9]{2})[0-9]{10}$"},"sha256":{"type":"string","maxLength":32},"user_ids":{"type":"array","items":{"type":"integer"}}},"required":["seq","cid","sha256","user_ids"],"additionalProperties":false},"minItems":1},"pubkeys":{"type":"array","items":{"type":"string","pattern":"^(146502805[0-3]|14650280[0-4][0-9]|146502[0-7][0-9]{3}|14650[01][0-9]{4}|146[0-4][0-9]{6}|14[0-5][0-9]{7}|139[0-9]{7}|1389[0-9]{6}|1388[6-9][0-9]{5}|13885[4-9][0-9]{4}|138853[5-9][0-9]{3}|1388534[4-9][0-9]{2})[0-9]{10}$"},"minItems":1},"refresh_tokens":{"type":"array","items":{"type":"object","properties":{"provider":{"type":"string","pattern":"^(facebook|flickr|foursquare|google_oauth2|instagram|linkedin|twitter|vkontakte)$"},"refresh_token":{"type":"string"}},"required":["provider","refresh_token"],"additionalProperties":false},"minItems":1,"maxItems":1},"oauths":{"type":"array","items":{"type":"object","properties":{"provider":{"type":"string","pattern":"^(facebook|flickr|foursquare|google_oauth2|instagram|linkedin|twitter|vkontakte)$"},"user_id":{"type":"string"},"token":{"type":"string"},"expires_at":{"type":"integer","minimum":1420070400,"maximum":1472976853},"refresh_token":{"type":"string"}},"required":["provider","user_id","token","expires_at"],"additionalProperties":false}},"messages":{"type":"array","title":"Request with messages from child client or server","description":"Array with messages from child client (server=false) or child server (server=true). Sender_did is only used in server to server communication. Receiver_sha256 is only used in client to client communication. Encryption is rsa, sym or mix. key is only used for mix encrypted messages","items":{"type":"object","properties":{"sender_did":{"type":"string","pattern":"^(146502805[0-3]|14650280[0-4][0-9]|146502[0-7][0-9]{3}|14650[01][0-9]{4}|146[0-4][0-9]{6}|14[0-5][0-9]{7}|139[0-9]{7}|1389[0-9]{6}|1388[6-9][0-9]{5}|13885[4-9][0-9]{4}|138853[5-9][0-9]{3}|1388534[4-9][0-9]{2})[0-9]{10}$"},"receiver_did":{"type":"string","pattern":"^(146502805[0-3]|14650280[0-4][0-9]|146502[0-7][0-9]{3}|14650[01][0-9]{4}|146[0-4][0-9]{6}|14[0-5][0-9]{7}|139[0-9]{7}|1389[0-9]{6}|1388[6-9][0-9]{5}|13885[4-9][0-9]{4}|138853[5-9][0-9]{3}|1388534[4-9][0-9]{2})[0-9]{10}$"},"receiver_sha256":{"type":"string"},"server":{"type":"boolean"},"encryption":{"type":"string","pattern":"^(rsa|sym|mix)$"},"key":{"type":"string"},"message":{"type":"string"}},"required":["receiver_did","server","encryption","message"],"additionalProperties":false},"minItems":1}},"required":["client_userid","client_timestamp","sid"],"additionalProperties":false}
NavCtrl.ping: errors : {"message":"Additional properties not allowed","params":{},"code":303,"dataPath":"/verify_comments/0/sha256_deleted","schemaPath":"/properties/verify_comments/items/additionalProperties","subErrors":null}
NavCtrl.ping: Ping loop aborted. Please correct error.