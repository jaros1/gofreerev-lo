testrun-44.

a) replicating gift 14481197074000741072 with unknown user id -4 from laptop2 to laptop

client 1:

TextService loaded
NotiService loaded
UserService loaded
UserService.init_friends: friends = [{"user_id":2,"uid":"1705481075","provider":"facebook","user_name":"Jan Roslind","friend":1,"api_profile_picture_url":"https://fbcdn-profile-a.akamaihd.net/hprofile-ak-xaf1/v/t1.0-1/c0.0.100.100‚Ä¶e69911beba&oe=56EE73C0&__gda__=1457651594_08d4411bec425bcc33a29ca920f1da82","sha256":"1ZvuCxcvwezm+pWyTqyMg/m5P0T7ql0qVNUwQpUcRKE=","remote_sha256":{"1":"P4ZEqEHSYL/CCThSP5inVCDbNZYRiRCLtAy/84ZksBA="}},{"user_id":3,"uid":"1563545817212684","provider":"facebook","user_name":"Jan Mobilos Roslind","friend":2,"api_profile_picture_url":"https://fbcdn-profile-a.akamaihd.net/hprofile-ak-prn2/v/t1.0-1/c17.0.100.10‚Ä¶f5d8b9d28b&oe=56AD78F9&__gda__=1457908312_6770c57900abaa6ef8c56577b4bc2f6f","sha256":"ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c=","remote_sha256":{"1":"URutwCLSHDcK/IOpBOSvwEEwO65TDITv9QGyRAQLzbo="}}]
UserService.load_users: users = [{"user_id":2,"uid":"1705481075","provider":"facebook","user_name":"Jan Roslind","api_profile_picture_url":"https://fbcdn-profile-a.akamaihd.net/hprofile-ak-xaf1/v/t1.0-1/c0.0.100.100‚Ä¶e69911beba&oe=56EE73C0&__gda__=1457651594_08d4411bec425bcc33a29ca920f1da82","verified_at":1448119697},{"user_id":3,"uid":"1563545817212684","provider":"facebook","user_name":"Jan Mobilos Roslind","api_profile_picture_url":"https://fbcdn-profile-a.akamaihd.net/hprofile-ak-prn2/v/t1.0-1/c17.0.100.10‚Ä¶f5d8b9d28b&oe=56AD78F9&__gda__=1457908312_6770c57900abaa6ef8c56577b4bc2f6f"}]
GiftService loaded
GiftService.load_gifts: delete gift 14481197074000741072 with negative user id -4
GiftService.invalid_gift: new_users_index = {}
GiftService.gift_sha256_for_client: gid = 14481196979194894893, in_gifts = true, comments_str = 0, sha256 = √∞K`√∂√ê¬ôg√¢¬âf¬∏¬ø, Z¬©√∏	+√µ√†RQ√û¬π√™,Z, sha256_gift = √ß¬õ¬æ¬è¬à7√§¬≠¬ù√•S¬â¬æ}√ö√Ö0G-Oa¬£j√É¬Ω+¬ªG, sha256_comments = _√¨√´f√ø√ào8√ôRxlmily√Ç√õ√Ç9√ùN¬ë¬¥g)√ó:'√ªW√©
GiftService.load_gifts: gift = {"gid":"14481196979194894893","giver_user_ids":[2],"receiver_user_ids":[],"created_at_client":1448119697,"currency":"usd","direction":"giver","description":"laptop","show":true,"comments":[],"created_at_server":0,"sha256":"√∞K`√∂√ê¬ôg√¢¬âf¬∏¬ø, Z¬©√∏\t+√µ\u001a√†\u0012RQ\u0018\b√û¬π√™,Z","sha256_gift":"√ß¬õ¬æ¬è¬à7√§¬≠¬ù\u001b√•S\u0015¬â¬æ}\u0016√ö√Ö0G\u0015-Oa¬£j√É¬Ω+¬ªG","sha256_comments":"_√¨√´f√ø√ào8√ôRxlmily√Ç√õ√Ç9√ùN¬ë¬¥g)√ó:'√ªW√©"}
GiftService.load_gifts: gifts.length = 1
NavCtrl loaded
NavCtrl.start ping process. start up ping interval = 2000
Synchronous XMLHttpRequest on the main thread is deprecated because of its detrimental effects to the end user's experience. For more help, check http://xhr.spec.whatwg.org/.
GiftsCtrl loaded
NavCtrl.do_tasks: start
GiftService.update_mailboxes: New online mailbox {"did":"14481195855569775932","sha256":"4TN85EzCM62tcmd0Z5WGrclA75bYLneI2ayfgeq4uoA=","mutual_friends":[2,3],"server_id":1,"key":"144811958555697759324TN85EzCM62tcmd0Z5WGrclA75bYLneI2ayfgeq4uoA=","online":true,"inbox":[],"read":[],"outbox":[],"sending":[],"sent":[],"done":[],"error":[]} with mutual friends 2, 3. Added message = {"mid":"14484665263463456499","msgtype":"users_sha256","users":[2,3]} to outbox
GiftService.pubkeys_request: request = ["14481195855569775932"]
GiftService.send_messages: Wait. Public key has not yet been received for device 14481195855569775932
GiftService.pubkeys_response: pubkeys = [{"did":"14481195855569775932","pubkey":"-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAqdpgwEmNxbmNkSauONjp\n2gpcT4qJooPUD4VsgkdtyGrf6sXphLLtRl3xAVWxVDc32FykliPtsPO6VR4z0I4Z\nrFqpUuH15ZjgTs/ybfHB+dwVXeF+WQsAioFXSxCJIsEAV1tqMJsLFmBw+iVEedsh\nLjiJiSmrdzCVGGBoE8BwWXvymYqOBF1x3fAJbb1n39+IuFksqqSowKW7KsFt4raT\n549F9sS0NuqEySu1MGvUvyPJV14j6JVZsxtNFgOOyy4RzQjSjGyM+8Mai3KcKm0b\n3DEQyUZrrZSHwkapOYY431zV1ynG3oddxf0vLCwcIjZzBuqn9St1jm3YHG3GXvjW\neQIDAQAB\n-----END PUBLIC KEY-----"}]
GiftService.send_messages: symmetric password setup: generated password1
GiftService.send_messages: symmetric password setup: sending rsa message
GiftService.receive_messages: message_with_envelope = {"sender_did":"14481195855569775932","server":false,"encryption":"rsa","message":"jGoVjLcEVQgHCfWy+SWk48epH8A/cqQvgvhys//FpsOpdx/H8LUa3vwqJQTpOEOP/RQw7NMNOzOZBPwoNQeWyUxrTFJrJmwcbXzIZB4ODF7bIGs/dACwiUFKxS9S5GSj5iV0RZ+Zbp/KksL4zkh2aZRVW2TA2EsZlM4TgCoCqG8Y9fM/Y0h238qasQAZbP8qUFW74xaQqbS5kZvDAyDhiyr8maA8fPP01F95Kjm2L0a9h7D7SEc+4N6i+JnwfsS/wReu1p4c1KIxfXIABsQl2s/9f4+qTLY5BM0Hn1kdcNPf1YoryK2jk3MgkttLL6+e54g9tCpjUj7KlZ3h6kLRzA==","receiver_did":"14481194806251567148","sender_sha256":"4TN85EzCM62tcmd0Z5WGrclA75bYLneI2ayfgeq4uoA="}
GiftService.setup_device_password: device.password = _t8t}vGUFUw?gel:aJ[yhUSlrsD7|)t9PEz0(b}=AK9jNM09P&!!8)Q#4+ar}(kUTh$8?/ZHoHE-2/j!
GiftService.receive_message_password: device.password = _t8t}vGUFUw?gel:aJ[yhUSlrsD7|)t9PEz0(b}=AK9jNM09P&!!8)Q#4+ar}(kUTh$8?/ZHoHE-2/j!
GiftService.receive_message_password: symmetric password setup in progress.
GiftService.receive_message_password: done = 0, md5_ok = false
GiftService.receive_messages: device.password = undefined
GiftService.setup_device_password: device.password = _t8t}vGUFUw?gel:aJ[yhUSlrsD7|)t9PEz0(b}=AK9jNM09P&!!8)Q#4+ar}(kUTh$8?/ZHoHE-2/j!
GiftService.send_messages: symmetric password setup: sending rsa message
GiftService.send_messages: msg = {"mid":"14484665263463456499","msgtype":"users_sha256","users":[2,3]}
GiftService.calc_sha256_for_user: No gifts was found for user_id 3
UserService.user_ids_to_remote_sha256: mutual_friends = [2,3], typeof user_ids = object
GiftService.send_message_users_sha256: users_sha256_message = {"msgtype":"users_sha256","mid":"14484665263463456499","users":[{"user_id":"P4ZEqEHSYL/CCThSP5inVCDbNZYRiRCLtAy/84ZksBA=","sha256":"¬ë¬™√•√ë{√≤kS√ù'√Æ\u000f13uZ√æ|√ß¬ß\u0012MAz[¬Ü|√ø-¬ª¬ñ\u0013"},{"user_id":"URutwCLSHDcK/IOpBOSvwEEwO65TDITv9QGyRAQLzbo="}]}
GiftService.send_messages: unencrypted message = {"sent_at_client":1448466541167,"messages":[{"msgtype":"users_sha256","mid":"14484665263463456499","users":[{"user_id":"P4ZEqEHSYL/CCThSP5inVCDbNZYRiRCLtAy/84ZksBA=","sha256":"¬ë¬™√•√ë{√≤kS√ù'√Æ\u000f13uZ√æ|√ß¬ß\u0012MAz[¬Ü|√ø-¬ª¬ñ\u0013"},{"user_id":"URutwCLSHDcK/IOpBOSvwEEwO65TDITv9QGyRAQLzbo="}]}]}
GiftService.send_messages: message_with_envelope = {"receiver_did":"14481195855569775932","receiver_sha256":"4TN85EzCM62tcmd0Z5WGrclA75bYLneI2ayfgeq4uoA=","server":false,"encryption":"sym","message":"U2FsdGVkX1/qUkKcV0OOzz1qq2rkcVyuzbvIN37Rk/E0ioqh+C8ST1yaeJLMmfamJ0apMz7KIlq6TUYj8eGF7jij80jLhqO3FZ1rf42pezYcsIaNSZ45N1Z5bVYF9ktdpeXHZzoEnKEv2/bxQDf6Cu39bKLxRTgiAwFJ4DsivLFJG6jg0WHnSySxghIcc4H1f1kE/QZbpkPRVa4Izv4D+ojWKvGFK6Fz0UdJWDk2z07f/wTdQTnTna9SViS/WLXjbILd6V6k1d/RMIvLdn8OwmKMWOknWzHP48ehYgiM55fK82UA/LHCKWzGAFxfu53jWrP1HBdYOnrcX2OqT/yqk+Nek8K9RhDppecKQxeA7Z3bB5Q/j1jgrX05OVLRVRBhtx5cUYOZoqGEhwJ1o56i/HFF30sDSaaFYsfsDHI7u/s="}
GiftService.receive_messages: message_with_envelope = {"sender_did":"14481195855569775932","server":false,"encryption":"rsa","message":"ntkdTSQJIpVaIh/MXgkmelxalm78qQ9H/p9eO9jroqx+0LhJX2R9lb8tPOM98r9bdu6XEiJSP6XGb4OKVYF+YnI5pdYgEQicGw9dgKEGdcTE8MIijz3j3udhWgwCDnyjmgqjo0QFnrDbQAdmwevSjV0qy80U5HJUyTxd8KNOsEJDEYoCIvPMUoM0mO+iRZvTn/SpYirxmpnpLk6bntjfaJz0Sd4fDHL5VDzA6O6QIrAwCQurUMHo24rgWe/u/1OTv1tZEhSTvAkw2nSjmHCWc0DNYSsMWtd18jd0pdOf39huCQI4N131r3t4zvsV08giBcznRiEfx8SJQRcAPdyQtw==","receiver_did":"14481194806251567148","sender_sha256":"4TN85EzCM62tcmd0Z5WGrclA75bYLneI2ayfgeq4uoA="}
GiftService.setup_device_password: device.password = _t8t}vGUFUw?gel:aJ[yhUSlrsD7|)t9PEz0(b}=AK9jNM09P&!!8)Q#4+ar}(kUTh$8?/ZHoHE-2/j!
GiftService.receive_message_password: device.password = _t8t}vGUFUw?gel:aJ[yhUSlrsD7|)t9PEz0(b}=AK9jNM09P&!!8)Q#4+ar}(kUTh$8?/ZHoHE-2/j!
GiftService.receive_message_password: symmetric password setup completed.
GiftService.receive_message_password: done = 0, md5_ok = true
GiftService.receive_messages: device.password = _t8t}vGUFUw?gel:aJ[yhUSlrsD7|)t9PEz0(b}=AK9jNM09P&!!8)Q#4+ar}(kUTh$8?/ZHoHE-2/j!
GiftService.receive_messages: message_with_envelope = {"sender_did":"14481195855569775932","server":false,"encryption":"rsa","message":"kbmY88JdrTqnZ1VW8JLsqS1ycngtL+KACLaE8JETD8BaS7ZxfwqZki2XDeV6SaTwy1nQ+4M+y7PcUNQvirxxulx1pQDVrlIPHXq/lq/5pfs64mdy49dwJQ+R+UG9/RLMgKDQTNQnK6M0JjUrYzMUHDMX3vBt2U+i69IQwYe8jqaFhSHXAm6X5viQ5x0tQW9Fc0/b0uJACBp96VVqPULlIz2FxnsF0GpLzlD54qTV51OxlTDTMgn/r+2q+YPIr7LjIdPUAPR03taF5LP5H8DY6Xo8dxAhiVQSQ7STBKtOa/GqAPCYS4EkBktjDTmkjnXBWursRwcE6ZVrOW3sLSOUSg==","receiver_did":"14481194806251567148","sender_sha256":"4TN85EzCM62tcmd0Z5WGrclA75bYLneI2ayfgeq4uoA="}
GiftService.setup_device_password: device.password = _t8t}vGUFUw?gel:aJ[yhUSlrsD7|)t9PEz0(b}=AK9jNM09P&!!8)Q#4+ar}(kUTh$8?/ZHoHE-2/j!
GiftService.receive_message_password: device.password = _t8t}vGUFUw?gel:aJ[yhUSlrsD7|)t9PEz0(b}=AK9jNM09P&!!8)Q#4+ar}(kUTh$8?/ZHoHE-2/j!
GiftService.receive_message_password: symmetric password setup completed.
GiftService.receive_message_password: done = 0, md5_ok = true
GiftService.receive_messages: device.password = _t8t}vGUFUw?gel:aJ[yhUSlrsD7|)t9PEz0(b}=AK9jNM09P&!!8)Q#4+ar}(kUTh$8?/ZHoHE-2/j!
GiftService.receive_message_users_sha256: mailbox = {"did":"14481195855569775932","sha256":"4TN85EzCM62tcmd0Z5WGrclA75bYLneI2ayfgeq4uoA=","mutual_friends":[2,3],"server_id":1,"key":"144811958555697759324TN85EzCM62tcmd0Z5WGrclA75bYLneI2ayfgeq4uoA=","online":true,"inbox":[],"read":[],"outbox":[],"sending":[],"sent":[{"msgtype":"users_sha256","mid":"14484665263463456499","users":[{"user_id":"P4ZEqEHSYL/CCThSP5inVCDbNZYRiRCLtAy/84ZksBA=","sha256":"¬ë¬™√•√ë{√≤kS√ù'√Æ\u000f13uZ√æ|√ß¬ß\u0012MAz[¬Ü|√ø-¬ª¬ñ\u0013"},{"user_id":"URutwCLSHDcK/IOpBOSvwEEwO65TDITv9QGyRAQLzbo="}]}],"done":[],"error":[]}
GiftService.receive_message_users_sha256: msg     = {"msgtype":"users_sha256","mid":"14484665303579595932","users":[{"user_id":"ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c=","sha256":"√≠(¬î√íWQ\r√òr\u0005¬à¬™i`\u0000√Ç%=\u0017¬É√ä{-√è√çn√≠\u001d¬µ√ÄY"},{"user_id":"1ZvuCxcvwezm+pWyTqyMg/m5P0T7ql0qVNUwQpUcRKE=","sha256":"¬ë¬™√•√ë{√≤kS√ù'√Æ\u000f13uZ√æ|√ß¬ß\u0012MAz[¬Ü|√ø-¬ª¬ñ\u0013"}]}
GiftService.receive_message_users_sha256: users_sha256 message from client on an other Gofreerev server. Translate sha256 signatures in msg.users to internal user ids
GiftService.receive_message_users_sha256: msg.users (1) = [{"user_id":"ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c=","sha256":"√≠(¬î√íWQ\r√òr\u0005¬à¬™i`\u0000√Ç%=\u0017¬É√ä{-√è√çn√≠\u001d¬µ√ÄY"},{"user_id":"1ZvuCxcvwezm+pWyTqyMg/m5P0T7ql0qVNUwQpUcRKE=","sha256":"¬ë¬™√•√ë{√≤kS√ù'√Æ\u000f13uZ√æ|√ß¬ß\u0012MAz[¬Ü|√ø-¬ª¬ñ\u0013"}]
GiftService.receive_message_users_sha256: translating sha256 user_id 1ZvuCxcvwezm+pWyTqyMg/m5P0T7ql0qVNUwQpUcRKE= to internal user_id 2
GiftService.receive_message_users_sha256: translating sha256 user_id ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c= to internal user_id 3
GiftService.receive_message_users_sha256: msg.users (2) = [{"user_id":3,"sha256":"√≠(¬î√íWQ\r√òr\u0005¬à¬™i`\u0000√Ç%=\u0017¬É√ä{-√è√çn√≠\u001d¬µ√ÄY"},{"user_id":2,"sha256":"¬ë¬™√•√ë{√≤kS√ù'√Æ\u000f13uZ√æ|√ß¬ß\u0012MAz[¬Ü|√ø-¬ª¬ñ\u0013"}]
GiftService.receive_message_users_sha256: msg_users = [3,2], my_mutual_friends = [2,3], invalid_user_ids = []
GiftService.calc_sha256_for_user: No gifts was found for user_id 3
GiftService.receive_message_users_sha256: sha256_hash = {"2":{"my_sha256":"¬ë¬™√•√ë{√≤kS√ù'√Æ\u000f13uZ√æ|√ß¬ß\u0012MAz[¬Ü|√ø-¬ª¬ñ\u0013","msg_sha256":"¬ë¬™√•√ë{√≤kS√ù'√Æ\u000f13uZ√æ|√ß¬ß\u0012MAz[¬Ü|√ø-¬ª¬ñ\u0013"},"3":{"msg_sha256":"√≠(¬î√íWQ\r√òr\u0005¬à¬™i`\u0000√Ç%=\u0017¬É√ä{-√è√çn√≠\u001d¬µ√ÄY"}}
GiftService.receive_message_users_sha256: user_ids = 3
GiftService.receive_message_users_sha256: No gifts was found for user id 3
GiftService.receive_message_users_sha256: gifts_sha256_hash = {}
GiftService.receive_message_users_sha256: gifts_sha256_message (1) = {"mid":"14484665475410674004","request_mid":"14484665303579595932","msgtype":"gifts_sha256","ignore_invalid_gifts":[],"users":[3],"gifts":[]}
UserService.user_ids_to_remote_sha256: mutual_friends = [3], typeof user_ids = object
GiftService.receive_message_users_sha256: gifts_sha256_message (2) = {"mid":"14484665475410674004","request_mid":"14484665303579595932","msgtype":"gifts_sha256","ignore_invalid_gifts":[],"users":["URutwCLSHDcK/IOpBOSvwEEwO65TDITv9QGyRAQLzbo="],"gifts":[]}
GiftService.send_messages: msg = {"mid":"14484665475410674004","request_mid":"14484665303579595932","msgtype":"gifts_sha256","ignore_invalid_gifts":[],"users":["URutwCLSHDcK/IOpBOSvwEEwO65TDITv9QGyRAQLzbo="],"gifts":[]}
GiftService.send_messages: unencrypted message = {"sent_at_client":1448466549534,"messages":[{"mid":"14484665475410674004","request_mid":"14484665303579595932","msgtype":"gifts_sha256","ignore_invalid_gifts":[],"users":["URutwCLSHDcK/IOpBOSvwEEwO65TDITv9QGyRAQLzbo="],"gifts":[]}]}
GiftService.send_messages: message_with_envelope = {"receiver_did":"14481195855569775932","receiver_sha256":"4TN85EzCM62tcmd0Z5WGrclA75bYLneI2ayfgeq4uoA=","server":false,"encryption":"sym","message":"U2FsdGVkX19H8IqZjd//luaO2B1Cp1JK89b+bT3OUeQnvk4r1hNNO2c+tEgtsnFpF7IP77ywScRedbvCcTHF/usA1QByBK6lc0nrJBDHS7Vf8Z+WQeHo2pACWShcno+5gwDvkk3sDQsxzORBQPWYmlDVxfkAXuFhydp6Svy3BF/1rDZpkJ5wOq8a+n+a6b9G7LwW6R/yWhwhm/LcDMJ79/4FvFj+qNRa8POKQFR1UZApbGVNMbetUpIVH/CDMmy/BRNxz7JRLhMUwMuF1m5mA6GVhi66zDJoygGj5sZQ81POsFpUQ6FeEOmb/YVKr7uh0s/YhIBwbmeLz42FxSSEJQ=="}
GiftService.receive_message_gifts_sha256: mailbox = {"did":"14481195855569775932","sha256":"4TN85EzCM62tcmd0Z5WGrclA75bYLneI2ayfgeq4uoA=","mutual_friends":[2,3],"server_id":1,"key":"144811958555697759324TN85EzCM62tcmd0Z5WGrclA75bYLneI2ayfgeq4uoA=","online":true,"inbox":[],"read":[],"outbox":[],"sending":[],"sent":[{"msgtype":"users_sha256","mid":"14484665263463456499","users":[{"user_id":"P4ZEqEHSYL/CCThSP5inVCDbNZYRiRCLtAy/84ZksBA=","sha256":"¬ë¬™√•√ë{√≤kS√ù'√Æ\u000f13uZ√æ|√ß¬ß\u0012MAz[¬Ü|√ø-¬ª¬ñ\u0013"},{"user_id":"URutwCLSHDcK/IOpBOSvwEEwO65TDITv9QGyRAQLzbo="}]},{"mid":"14484665475410674004","request_mid":"14484665303579595932","msgtype":"gifts_sha256","ignore_invalid_gifts":[],"users":["URutwCLSHDcK/IOpBOSvwEEwO65TDITv9QGyRAQLzbo="],"gifts":[]}],"done":[],"error":[]}
GiftService.receive_message_gifts_sha256: msg     = {"mid":"14484665453905913561","request_mid":"14484665263463456499","msgtype":"gifts_sha256","ignore_invalid_gifts":[],"users":["ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c="],"gifts":[{"gid":"14481197074000741072","sha256":"G1p¬°√ì¬§√î>?'N^*√Ü√èm¬ù¬ø√≥7¬è¬¶(¬Ö√Ω¬πF¬ï*¬ß√Ç√Å"}]}
GiftService.move_previous_message: Moving old users_sha256 message 14484665263463456499 from sent to done folder.
GiftService.receive_message_gifts_sha256: gifts_sha256 message from client on an other Gofreerev server. Translate sha256 signatures in msg.users to internal user ids
GiftService.receive_message_gifts_sha256: msg.users (1) = ["ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c="]
GiftService.receive_message_gifts_sha256: translating sha256 user_id ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c= to internal user_id 3
GiftService.receive_message_gifts_sha256: msg.users (2) = [3]
GiftService.receive_message_gifts_sha256: no gifts for user id 3
GiftService.receive_message_gifts_sha256: request_gids = 14481197074000741072
GiftService.receive_message_gifts_sha256: sync_gifts_message = {"mid":"14484665496260141069","request_mid":"14484665453905913561","msgtype":"sync_gifts","mutual_friends":[3],"send_gifts":null,"request_gifts":{"mid":"14484665496263596255","msgtype":"request_gifts","gifts":["14481197074000741072"]},"check_gifts":null}
GiftService.sync_gifts_translate_user_ids: sync_gifts_message (1) = {"mid":"14484665496260141069","request_mid":"14484665453905913561","msgtype":"sync_gifts","mutual_friends":[3],"send_gifts":null,"request_gifts":{"mid":"14484665496263596255","msgtype":"request_gifts","gifts":["14481197074000741072"]},"check_gifts":null}
UserService.user_ids_to_remote_sha256: mutual_friends = [3], typeof user_ids = object
GiftService.sync_gifts_translate_user_ids: sync_gifts_message (3) = {"mid":"14484665496260141069","request_mid":"14484665453905913561","msgtype":"sync_gifts","mutual_friends":["URutwCLSHDcK/IOpBOSvwEEwO65TDITv9QGyRAQLzbo="],"send_gifts":null,"request_gifts":{"mid":"14484665496263596255","msgtype":"request_gifts","gifts":["14481197074000741072"]},"check_gifts":null}
GiftService.validate_request_gifts_message: validating request_gifts message before send
GiftService.send_messages: msg = {"mid":"14484665496260141069","request_mid":"14484665453905913561","msgtype":"sync_gifts","mutual_friends":["URutwCLSHDcK/IOpBOSvwEEwO65TDITv9QGyRAQLzbo="],"request_gifts":{"mid":"14484665496263596255","msgtype":"request_gifts","gifts":["14481197074000741072"]}}
GiftService.send_messages: unencrypted message = {"sent_at_client":1448466551619,"messages":[{"mid":"14484665496260141069","request_mid":"14484665453905913561","msgtype":"sync_gifts","mutual_friends":["URutwCLSHDcK/IOpBOSvwEEwO65TDITv9QGyRAQLzbo="],"request_gifts":{"mid":"14484665496263596255","msgtype":"request_gifts","gifts":["14481197074000741072"]}}]}
GiftService.send_messages: message_with_envelope = {"receiver_did":"14481195855569775932","receiver_sha256":"4TN85EzCM62tcmd0Z5WGrclA75bYLneI2ayfgeq4uoA=","server":false,"encryption":"sym","message":"U2FsdGVkX1/v3iYk3rchsdaUdACvNqVYyBUADfvH55ZoQuFq14k8xe+CGDDMDWppYGQHJ8E0Q5UVAFdiqpfYT7M9T+N+ELGgx/VlUMRLk+52E+U3NxZ77f8UYWK5RNgULYGvc+5XHFiFe3pWHFAsZYTdIxIW0Yv/J1+622zEFoC3MFVPlyTe72VHjLyrjvetvgHMWZDWFDX5FLZbWx8aGWf7GPLXFRV5RsJXaMIWfmddBYDHHIoOHG8boJQC8A8qxsebEF4chqZ+lYKx19LlJN1VNOpQoR1VodVhG+M6jUeEv46dpTkadCJPT3X5rRYBGTWZGOeoX7gE/bA9faLMtUeWxcGeJjeXCEdph+R/xzz61lo8NHJq8Puna7h5EJmBFU19ygZJf9P5tGnHu4IuUl6ilT97Zf324mhtuu6lv5rq+LLUqBtbO8KL8TzRXi+n"}
GiftService.receive_message_sync_gifts: mailbox  = {"did":"14481195855569775932","sha256":"4TN85EzCM62tcmd0Z5WGrclA75bYLneI2ayfgeq4uoA=","mutual_friends":[2,3],"server_id":1,"key":"144811958555697759324TN85EzCM62tcmd0Z5WGrclA75bYLneI2ayfgeq4uoA=","online":true,"inbox":[],"read":[],"outbox":[],"sending":[],"sent":[{"mid":"14484665475410674004","request_mid":"14484665303579595932","msgtype":"gifts_sha256","ignore_invalid_gifts":[],"users":["URutwCLSHDcK/IOpBOSvwEEwO65TDITv9QGyRAQLzbo="],"gifts":[]},{"mid":"14484665496263596255","msgtype":"request_gifts","gifts":["14481197074000741072"]}],"done":[{"msgtype":"users_sha256","mid":"14484665263463456499","users":[{"user_id":"P4ZEqEHSYL/CCThSP5inVCDbNZYRiRCLtAy/84ZksBA=","sha256":"¬ë¬™√•√ë{√≤kS√ù'√Æ\u000f13uZ√æ|√ß¬ß\u0012MAz[¬Ü|√ø-¬ª¬ñ\u0013"},{"user_id":"URutwCLSHDcK/IOpBOSvwEEwO65TDITv9QGyRAQLzbo="}]}],"error":[]}
GiftService.receive_message_sync_gifts: msg      = {"mid":"14484665543554883231","request_mid":"14484665475410674004","msgtype":"sync_gifts","mutual_friends":["ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c="],"send_gifts":{"mid":"14484665543554413319","msgtype":"send_gifts","gifts":[{"gid":"14481197074000741072","giver_user_ids":["ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c=",-4],"receiver_user_ids":[],"created_at_client":1448119707,"created_at_server":0,"currency":"usd","direction":"giver","description":"laptop2"}],"users":[{"user_id":-4,"uid":"117126429320850988781","provider":"google_oauth2","user_name":"Jan Mobilos Roslind","api_profile_picture_url":"https://lh4.googleusercontent.com/-OaSW5VjFv4k/AAAAAAAAAAI/AAAAAAAAAB4/r6YxZoPJsSg/photo.jpg?sz=100"}],"servers":[{"server_id":0,"sha256":"c7RMen6sdUjB1rmBdtZIpqQyvzJuV9+sNDceb3Ae7d0="}]}}
GiftService.move_previous_message: Moving old gifts_sha256 message 14484665475410674004 from sent to done folder.
GiftService.receive_message_sync_gifts: sync_gifts message from client on an other Gofreerev server. Translate sha256 signatures in msg.users to internal user ids
GiftService.receive_message_sync_gifts: msg.mutual_friends (1) = ["ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c="]
GiftService.receive_message_sync_gifts: translating sha256 user_id ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c= to internal user_id 3
GiftService.receive_message_sync_gifts: msg.mutual_friends (2) = [3]
GiftService.receive_message_send_gifts: mailbox  = {"did":"14481195855569775932","sha256":"4TN85EzCM62tcmd0Z5WGrclA75bYLneI2ayfgeq4uoA=","mutual_friends":[2,3],"server_id":1,"key":"144811958555697759324TN85EzCM62tcmd0Z5WGrclA75bYLneI2ayfgeq4uoA=","online":true,"inbox":[],"read":[],"outbox":[],"sending":[],"sent":[{"mid":"14484665496263596255","msgtype":"request_gifts","gifts":["14481197074000741072"]}],"done":[{"msgtype":"users_sha256","mid":"14484665263463456499","users":[{"user_id":"P4ZEqEHSYL/CCThSP5inVCDbNZYRiRCLtAy/84ZksBA=","sha256":"¬ë¬™√•√ë{√≤kS√ù'√Æ\u000f13uZ√æ|√ß¬ß\u0012MAz[¬Ü|√ø-¬ª¬ñ\u0013"},{"user_id":"URutwCLSHDcK/IOpBOSvwEEwO65TDITv9QGyRAQLzbo="}]},{"mid":"14484665475410674004","request_mid":"14484665303579595932","msgtype":"gifts_sha256","ignore_invalid_gifts":[],"users":["URutwCLSHDcK/IOpBOSvwEEwO65TDITv9QGyRAQLzbo="],"gifts":[]}],"error":[]}
GiftService.receive_message_send_gifts: msg      = {"mid":"14484665543554413319","msgtype":"send_gifts","gifts":[{"gid":"14481197074000741072","giver_user_ids":["ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c=",-4],"receiver_user_ids":[],"created_at_client":1448119707,"created_at_server":0,"currency":"usd","direction":"giver","description":"laptop2"}],"users":[{"user_id":-4,"uid":"117126429320850988781","provider":"google_oauth2","user_name":"Jan Mobilos Roslind","api_profile_picture_url":"https://lh4.googleusercontent.com/-OaSW5VjFv4k/AAAAAAAAAAI/AAAAAAAAAB4/r6YxZoPJsSg/photo.jpg?sz=100"}],"servers":[{"server_id":0,"sha256":"c7RMen6sdUjB1rmBdtZIpqQyvzJuV9+sNDceb3Ae7d0="}],"request_mid":"14484665475410674004","pass":0,"mutual_friends":[3]}
GiftService.receive_message_send_gifts: msg.pass = 0
GiftService.validate_send_gifts_message: validating send_gifts message after received
GiftService.validate_send_gifts_message: mutual_friends = ["1ZvuCxcvwezm+pWyTqyMg/m5P0T7ql0qVNUwQpUcRKE=","ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c="]
GiftService.validate_send_gifts_message: send_gifts_received_user_ids  = -4
GiftService.validate_send_gifts_message: send_gifts_expected_user_ids  = -4
GiftService.validate_send_gifts_message: send_gift_missing_user_ids    =
GiftService.validate_send_gifts_message: send_gift_unexpected_user_ids =
GiftService.invalid_gift: new_users_index = {"-4":{"user_id":-4,"uid":"117126429320850988781","provider":"google_oauth2","user_name":"Jan Mobilos Roslind","api_profile_picture_url":"https://lh4.googleusercontent.com/-OaSW5VjFv4k/AAAAAAAAAAI/AAAAAAAAAB4/r6YxZoPJsSg/photo.jpg?sz=100"}}
GiftService.gift_sha256_for_client: gid = 14481197074000741072, in_gifts = false, comments_str = 0, sha256 = G1p¬°√ì¬§√î>?'N^*√Ü√èm¬ù¬ø√≥7¬è¬¶(¬Ö√Ω¬πF¬ï*¬ß√Ç√Å, sha256_gift = r√¶¬ã¬¥¬∏√Ä√í√Ø¬Ωf√ï¬∑√ë
¬ü/¬æ¬¨E√Æ√éf4¬ÅsF1lG>c, sha256_comments = _√¨√´f√ø√ào8√ôRxlmily√Ç√õ√Ç9√ùN¬ë¬¥g)√ó:'√ªW√©
GiftService.receive_message_send_gifts: other_server_id_to_sha256 = {"0":"c7RMen6sdUjB1rmBdtZIpqQyvzJuV9+sNDceb3Ae7d0="}
GiftService.receive_message_send_gifts: pass = 1, verify remote gift {"gid":"14481197074000741072","giver_user_ids":[3,-4],"receiver_user_ids":[],"created_at_client":1448119707,"created_at_server":1,"currency":"usd","direction":"giver","description":"laptop2","sha256":"G1p¬°√ì¬§√î>?'N^*√Ü√èm¬ù¬ø√≥7¬è¬¶(¬Ö√Ω¬πF¬ï*¬ß√Ç√Å","sha256_gift":"r√¶¬ã¬¥¬∏√Ä√í√Ø¬Ωf√ï¬∑\u001c√ë\r¬ü/¬æ¬¨E√Æ√éf4¬ÅsF1lG>c","sha256_comments":"_√¨√´f√ø√ào8√ôRxlmily√Ç√õ√Ç9√ùN¬ë¬¥g)√ó:'√ªW√©"}
GiftService.verify_gifts_add: added gid 14481197074000741072 to verify gifts buffer with action=verify
GiftService.receive_message_send_gifts: Waiting for 1 gifts to be server verified.
GiftService.receive_message_send_gifts: mailbox.read.length = 1
GiftService.receive_message_send_gifts: verify_gifts = [{"gid":"14481197074000741072","giver_user_ids":[3,-4],"receiver_user_ids":[],"created_at_client":1448119707,"created_at_server":1,"currency":"usd","direction":"giver","description":"laptop2","sha256":"G1p¬°√ì¬§√î>?'N^*√Ü√èm¬ù¬ø√≥7¬è¬¶(¬Ö√Ω¬πF¬ï*¬ß√Ç√Å","sha256_gift":"r√¶¬ã¬¥¬∏√Ä√í√Ø¬Ωf√ï¬∑\u001c√ë\r¬ü/¬æ¬¨E√Æ√éf4¬ÅsF1lG>c","sha256_comments":"_√¨√´f√ø√ào8√ôRxlmily√Ç√õ√Ç9√ùN¬ë¬¥g)√ó:'√ªW√©","verify_gift_at":1448466558,"verify_gift_action":"verify"}]
GiftService.receive_message_send_gifts: verify_comments = []
GiftService.process_messages: mailbox.read.length = 1
GiftService.verify_gifts_request: 1 new gift verification requests sent to server.
GiftService.process_messages: 1 messages was moved from mailbox.read to mailbox.inbox
GiftService.receive_message_send_gifts: mailbox  = {"did":"14481195855569775932","sha256":"4TN85EzCM62tcmd0Z5WGrclA75bYLneI2ayfgeq4uoA=","mutual_friends":[2,3],"server_id":1,"key":"144811958555697759324TN85EzCM62tcmd0Z5WGrclA75bYLneI2ayfgeq4uoA=","online":true,"inbox":[],"read":[],"outbox":[],"sending":[],"sent":[{"mid":"14484665496263596255","msgtype":"request_gifts","gifts":["14481197074000741072"]}],"done":[{"msgtype":"users_sha256","mid":"14484665263463456499","users":[{"user_id":"P4ZEqEHSYL/CCThSP5inVCDbNZYRiRCLtAy/84ZksBA=","sha256":"¬ë¬™√•√ë{√≤kS√ù'√Æ\u000f13uZ√æ|√ß¬ß\u0012MAz[¬Ü|√ø-¬ª¬ñ\u0013"},{"user_id":"URutwCLSHDcK/IOpBOSvwEEwO65TDITv9QGyRAQLzbo="}]},{"mid":"14484665475410674004","request_mid":"14484665303579595932","msgtype":"gifts_sha256","ignore_invalid_gifts":[],"users":["URutwCLSHDcK/IOpBOSvwEEwO65TDITv9QGyRAQLzbo="],"gifts":[]}],"error":[]}
GiftService.receive_message_send_gifts: msg      = {"mid":"14484665543554413319","msgtype":"send_gifts","gifts":[{"gid":"14481197074000741072","giver_user_ids":[3,-4],"receiver_user_ids":[],"created_at_client":1448119707,"created_at_server":1,"currency":"usd","direction":"giver","description":"laptop2","sha256":"G1p¬°√ì¬§√î>?'N^*√Ü√èm¬ù¬ø√≥7¬è¬¶(¬Ö√Ω¬πF¬ï*¬ß√Ç√Å","sha256_gift":"r√¶¬ã¬¥¬∏√Ä√í√Ø¬Ωf√ï¬∑\u001c√ë\r¬ü/¬æ¬¨E√Æ√éf4¬ÅsF1lG>c","sha256_comments":"_√¨√´f√ø√ào8√ôRxlmily√Ç√õ√Ç9√ùN¬ë¬¥g)√ó:'√ªW√©","verify_gift_at":1448466558,"verify_gift_action":"verify","verify_seq":-19}],"users":[{"user_id":-4,"uid":"117126429320850988781","provider":"google_oauth2","user_name":"Jan Mobilos Roslind","api_profile_picture_url":"https://lh4.googleusercontent.com/-OaSW5VjFv4k/AAAAAAAAAAI/AAAAAAAAAB4/r6YxZoPJsSg/photo.jpg?sz=100"}],"servers":[{"server_id":0,"sha256":"c7RMen6sdUjB1rmBdtZIpqQyvzJuV9+sNDceb3Ae7d0="}],"request_mid":"14484665475410674004","pass":1,"mutual_friends":[3]}
GiftService.receive_message_send_gifts: msg.pass = 1
GiftService.receive_message_send_gifts: pass = 1, verify remote gift {"gid":"14481197074000741072","giver_user_ids":[3,-4],"receiver_user_ids":[],"created_at_client":1448119707,"created_at_server":1,"currency":"usd","direction":"giver","description":"laptop2","sha256":"G1p¬°√ì¬§√î>?'N^*√Ü√èm¬ù¬ø√≥7¬è¬¶(¬Ö√Ω¬πF¬ï*¬ß√Ç√Å","sha256_gift":"r√¶¬ã¬¥¬∏√Ä√í√Ø¬Ωf√ï¬∑\u001c√ë\r¬ü/¬æ¬¨E√Æ√éf4¬ÅsF1lG>c","sha256_comments":"_√¨√´f√ø√ào8√ôRxlmily√Ç√õ√Ç9√ùN¬ë¬¥g)√ó:'√ªW√©","verify_gift_at":1448466558,"verify_gift_action":"verify","verify_seq":-19}
GiftService.receive_message_send_gifts: Waited 2 seconds for gift 14481197074000741072 verification
GiftService.receive_message_send_gifts: Waiting for 1 gifts to be server verified.
GiftService.receive_message_send_gifts: mailbox.read.length = 1
GiftService.receive_message_send_gifts: verify_gifts = []
GiftService.receive_message_send_gifts: verify_comments = []
GiftService.process_messages: mailbox.read.length = 1
GiftService.verify_gifts_request: Found 0 local and 1 remote gifts in gifts action buffer. 0 create, 1 verify, 0 accept and 0 delete gift requests
GiftService.verify_gifts_response: Received response for 1 gift actions (1 valid and 0 invalid).
GiftService.process_messages: 1 messages was moved from mailbox.read to mailbox.inbox
GiftService.receive_message_sync_gifts: mailbox  = {"did":"14481195855569775932","sha256":"4TN85EzCM62tcmd0Z5WGrclA75bYLneI2ayfgeq4uoA=","mutual_friends":[2,3],"server_id":1,"key":"144811958555697759324TN85EzCM62tcmd0Z5WGrclA75bYLneI2ayfgeq4uoA=","online":true,"inbox":[{"mid":"14484665543554413319","msgtype":"send_gifts","gifts":[{"gid":"14481197074000741072","giver_user_ids":[3,-4],"receiver_user_ids":[],"created_at_client":1448119707,"created_at_server":1,"currency":"usd","direction":"giver","description":"laptop2","sha256":"G1p¬°√ì¬§√î>?'N^*√Ü√èm¬ù¬ø√≥7¬è¬¶(¬Ö√Ω¬πF¬ï*¬ß√Ç√Å","sha256_gift":"r√¶¬ã¬¥¬∏√Ä√í√Ø¬Ωf√ï¬∑\u001c√ë\r¬ü/¬æ¬¨E√Æ√éf4¬ÅsF1lG>c","sha256_comments":"_√¨√´f√ø√ào8√ôRxlmily√Ç√õ√Ç9√ùN¬ë¬¥g)√ó:'√ªW√©","verify_gift_at":1448466558,"verify_gift_action":"verify","verify_seq":-19,"verified_at_server":true}],"users":[{"user_id":-4,"uid":"117126429320850988781","provider":"google_oauth2","user_name":"Jan Mobilos Roslind","api_profile_picture_url":"https://lh4.googleusercontent.com/-OaSW5VjFv4k/AAAAAAAAAAI/AAAAAAAAAB4/r6YxZoPJsSg/photo.jpg?sz=100"}],"servers":[{"server_id":0,"sha256":"c7RMen6sdUjB1rmBdtZIpqQyvzJuV9+sNDceb3Ae7d0="}],"request_mid":"14484665475410674004","pass":1,"mutual_friends":[3]}],"read":[],"outbox":[],"sending":[],"sent":[{"mid":"14484665496263596255","msgtype":"request_gifts","gifts":["14481197074000741072"]}],"done":[{"msgtype":"users_sha256","mid":"14484665263463456499","users":[{"user_id":"P4ZEqEHSYL/CCThSP5inVCDbNZYRiRCLtAy/84ZksBA=","sha256":"¬ë¬™√•√ë{√≤kS√ù'√Æ\u000f13uZ√æ|√ß¬ß\u0012MAz[¬Ü|√ø-¬ª¬ñ\u0013"},{"user_id":"URutwCLSHDcK/IOpBOSvwEEwO65TDITv9QGyRAQLzbo="}]},{"mid":"14484665475410674004","request_mid":"14484665303579595932","msgtype":"gifts_sha256","ignore_invalid_gifts":[],"users":["URutwCLSHDcK/IOpBOSvwEEwO65TDITv9QGyRAQLzbo="],"gifts":[]}],"error":[]}
GiftService.receive_message_sync_gifts: msg      = {"mid":"14484665574403488044","request_mid":"14484665496263596255","msgtype":"sync_gifts","mutual_friends":["ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c="],"send_gifts":{"mid":"14484665574385686320","msgtype":"send_gifts","gifts":[{"gid":"14481197074000741072","giver_user_ids":["ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c=",-4],"receiver_user_ids":[],"created_at_client":1448119707,"created_at_server":0,"currency":"usd","direction":"giver","description":"laptop2"}],"users":[{"user_id":-4,"uid":"117126429320850988781","provider":"google_oauth2","user_name":"Jan Mobilos Roslind","api_profile_picture_url":"https://lh4.googleusercontent.com/-OaSW5VjFv4k/AAAAAAAAAAI/AAAAAAAAAB4/r6YxZoPJsSg/photo.jpg?sz=100"}],"servers":[{"server_id":0,"sha256":"c7RMen6sdUjB1rmBdtZIpqQyvzJuV9+sNDceb3Ae7d0="}]}}
GiftService.move_previous_message: Moving old request_gifts message 14484665496263596255 from sent to done folder.
GiftService.receive_message_sync_gifts: sync_gifts message from client on an other Gofreerev server. Translate sha256 signatures in msg.users to internal user ids
GiftService.receive_message_sync_gifts: msg.mutual_friends (1) = ["ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c="]
GiftService.receive_message_sync_gifts: translating sha256 user_id ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c= to internal user_id 3
GiftService.receive_message_sync_gifts: msg.mutual_friends (2) = [3]
GiftService.receive_message_send_gifts: mailbox  = {"did":"14481195855569775932","sha256":"4TN85EzCM62tcmd0Z5WGrclA75bYLneI2ayfgeq4uoA=","mutual_friends":[2,3],"server_id":1,"key":"144811958555697759324TN85EzCM62tcmd0Z5WGrclA75bYLneI2ayfgeq4uoA=","online":true,"inbox":[{"mid":"14484665574385686320","msgtype":"send_gifts","gifts":[{"gid":"14481197074000741072","giver_user_ids":["ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c=",-4],"receiver_user_ids":[],"created_at_client":1448119707,"created_at_server":0,"currency":"usd","direction":"giver","description":"laptop2"}],"users":[{"user_id":-4,"uid":"117126429320850988781","provider":"google_oauth2","user_name":"Jan Mobilos Roslind","api_profile_picture_url":"https://lh4.googleusercontent.com/-OaSW5VjFv4k/AAAAAAAAAAI/AAAAAAAAAB4/r6YxZoPJsSg/photo.jpg?sz=100"}],"servers":[{"server_id":0,"sha256":"c7RMen6sdUjB1rmBdtZIpqQyvzJuV9+sNDceb3Ae7d0="}],"request_mid":"14484665496263596255","pass":0,"mutual_friends":[3]}],"read":[],"outbox":[],"sending":[],"sent":[],"done":[{"msgtype":"users_sha256","mid":"14484665263463456499","users":[{"user_id":"P4ZEqEHSYL/CCThSP5inVCDbNZYRiRCLtAy/84ZksBA=","sha256":"¬ë¬™√•√ë{√≤kS√ù'√Æ\u000f13uZ√æ|√ß¬ß\u0012MAz[¬Ü|√ø-¬ª¬ñ\u0013"},{"user_id":"URutwCLSHDcK/IOpBOSvwEEwO65TDITv9QGyRAQLzbo="}]},{"mid":"14484665475410674004","request_mid":"14484665303579595932","msgtype":"gifts_sha256","ignore_invalid_gifts":[],"users":["URutwCLSHDcK/IOpBOSvwEEwO65TDITv9QGyRAQLzbo="],"gifts":[]},{"mid":"14484665496263596255","msgtype":"request_gifts","gifts":["14481197074000741072"]}],"error":[]}
GiftService.receive_message_send_gifts: msg      = {"mid":"14484665543554413319","msgtype":"send_gifts","gifts":[{"gid":"14481197074000741072","giver_user_ids":[3,-4],"receiver_user_ids":[],"created_at_client":1448119707,"created_at_server":1,"currency":"usd","direction":"giver","description":"laptop2","sha256":"G1p¬°√ì¬§√î>?'N^*√Ü√èm¬ù¬ø√≥7¬è¬¶(¬Ö√Ω¬πF¬ï*¬ß√Ç√Å","sha256_gift":"r√¶¬ã¬¥¬∏√Ä√í√Ø¬Ωf√ï¬∑\u001c√ë\r¬ü/¬æ¬¨E√Æ√éf4¬ÅsF1lG>c","sha256_comments":"_√¨√´f√ø√ào8√ôRxlmily√Ç√õ√Ç9√ùN¬ë¬¥g)√ó:'√ªW√©","verify_gift_at":1448466558,"verify_gift_action":"verify","verify_seq":-19,"verified_at_server":true}],"users":[{"user_id":-4,"uid":"117126429320850988781","provider":"google_oauth2","user_name":"Jan Mobilos Roslind","api_profile_picture_url":"https://lh4.googleusercontent.com/-OaSW5VjFv4k/AAAAAAAAAAI/AAAAAAAAAB4/r6YxZoPJsSg/photo.jpg?sz=100"}],"servers":[{"server_id":0,"sha256":"c7RMen6sdUjB1rmBdtZIpqQyvzJuV9+sNDceb3Ae7d0="}],"request_mid":"14484665475410674004","pass":1,"mutual_friends":[3]}
GiftService.receive_message_send_gifts: msg.pass = 1
GiftService.receive_message_send_gifts: pass = 1, verify remote gift {"gid":"14481197074000741072","giver_user_ids":[3,-4],"receiver_user_ids":[],"created_at_client":1448119707,"created_at_server":1,"currency":"usd","direction":"giver","description":"laptop2","sha256":"G1p¬°√ì¬§√î>?'N^*√Ü√èm¬ù¬ø√≥7¬è¬¶(¬Ö√Ω¬πF¬ï*¬ß√Ç√Å","sha256_gift":"r√¶¬ã¬¥¬∏√Ä√í√Ø¬Ωf√ï¬∑\u001c√ë\r¬ü/¬æ¬¨E√Æ√éf4¬ÅsF1lG>c","sha256_comments":"_√¨√´f√ø√ào8√ôRxlmily√Ç√õ√Ç9√ùN¬ë¬¥g)√ó:'√ªW√©","verify_gift_at":1448466558,"verify_gift_action":"verify","verify_seq":-19,"verified_at_server":true}
GiftService.receive_message_send_gifts: pass 3 - create new gift = {"gid":"14481197074000741072","giver_user_ids":[3,-4],"receiver_user_ids":[],"created_at_client":1448119707,"created_at_server":1,"currency":"usd","direction":"giver","description":"laptop2","sha256":"G1p¬°√ì¬§√î>?'N^*√Ü√èm¬ù¬ø√≥7¬è¬¶(¬Ö√Ω¬πF¬ï*¬ß√Ç√Å","sha256_gift":"r√¶¬ã¬¥¬∏√Ä√í√Ø¬Ωf√ï¬∑\u001c√ë\r¬ü/¬æ¬¨E√Æ√éf4¬ÅsF1lG>c","sha256_comments":"_√¨√´f√ø√ào8√ôRxlmily√Ç√õ√Ç9√ùN¬ë¬¥g)√ó:'√ªW√©","verify_gift_at":1448466558,"verify_gift_action":"verify","verify_seq":-19,"verified_at_server":true}
GiftService.invalid_gift: new_users_index = {"-4":{"user_id":-4,"uid":"117126429320850988781","provider":"google_oauth2","user_name":"Jan Mobilos Roslind","api_profile_picture_url":"https://lh4.googleusercontent.com/-OaSW5VjFv4k/AAAAAAAAAAI/AAAAAAAAAB4/r6YxZoPJsSg/photo.jpg?sz=100"}}
GiftService.gift_sha256_for_client: gid = 14481197074000741072, in_gifts = false, comments_str = 0, sha256 = G1p¬°√ì¬§√î>?'N^*√Ü√èm¬ù¬ø√≥7¬è¬¶(¬Ö√Ω¬πF¬ï*¬ß√Ç√Å, sha256_gift = r√¶¬ã¬¥¬∏√Ä√í√Ø¬Ωf√ï¬∑√ë
¬ü/¬æ¬¨E√Æ√éf4¬ÅsF1lG>c, sha256_comments = _√¨√´f√ø√ào8√ôRxlmily√Ç√õ√Ç9√ùN¬ë¬¥g)√ó:'√ªW√©
UserService.save_users: users = [{"user_id":2,"uid":"1705481075","provider":"facebook","user_name":"Jan Roslind","api_profile_picture_url":"https://fbcdn-profile-a.akamaihd.net/hprofile-ak-xaf1/v/t1.0-1/c0.0.100.100‚Ä¶e69911beba&oe=56EE73C0&__gda__=1457651594_08d4411bec425bcc33a29ca920f1da82","verified_at":1448119697},{"user_id":3,"uid":"1563545817212684","provider":"facebook","user_name":"Jan Mobilos Roslind","api_profile_picture_url":"https://fbcdn-profile-a.akamaihd.net/hprofile-ak-prn2/v/t1.0-1/c17.0.100.10‚Ä¶f5d8b9d28b&oe=56AD78F9&__gda__=1457908312_6770c57900abaa6ef8c56577b4bc2f6f"},{"user_id":-4,"uid":"117126429320850988781","provider":"google_oauth2","user_name":"Jan Mobilos Roslind","api_profile_picture_url":"https://lh4.googleusercontent.com/-OaSW5VjFv4k/AAAAAAAAAAI/AAAAAAAAAB4/r6YxZoPJsSg/photo.jpg?sz=100"}]
GiftService.receive_message_send_gifts: pass = 1, error report not full implemented
GiftService.receive_message_send_gifts: Ok. Created gifts 14481197074000741072
GiftService.receive_message_send_gifts: todo: everything is ok. send OK message to other client?
GiftService.process_messages: mailbox.read.length = 0
GiftService.receive_message_send_gifts: mailbox  = {"did":"14481195855569775932","sha256":"4TN85EzCM62tcmd0Z5WGrclA75bYLneI2ayfgeq4uoA=","mutual_friends":[2,3],"server_id":1,"key":"144811958555697759324TN85EzCM62tcmd0Z5WGrclA75bYLneI2ayfgeq4uoA=","online":true,"inbox":[],"read":[],"outbox":[],"sending":[],"sent":[],"done":[{"msgtype":"users_sha256","mid":"14484665263463456499","users":[{"user_id":"P4ZEqEHSYL/CCThSP5inVCDbNZYRiRCLtAy/84ZksBA=","sha256":"¬ë¬™√•√ë{√≤kS√ù'√Æ\u000f13uZ√æ|√ß¬ß\u0012MAz[¬Ü|√ø-¬ª¬ñ\u0013"},{"user_id":"URutwCLSHDcK/IOpBOSvwEEwO65TDITv9QGyRAQLzbo="}]},{"mid":"14484665475410674004","request_mid":"14484665303579595932","msgtype":"gifts_sha256","ignore_invalid_gifts":[],"users":["URutwCLSHDcK/IOpBOSvwEEwO65TDITv9QGyRAQLzbo="],"gifts":[]},{"mid":"14484665496263596255","msgtype":"request_gifts","gifts":["14481197074000741072"]}],"error":[]}
GiftService.receive_message_send_gifts: msg      = {"mid":"14484665574385686320","msgtype":"send_gifts","gifts":[{"gid":"14481197074000741072","giver_user_ids":["ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c=",-4],"receiver_user_ids":[],"created_at_client":1448119707,"created_at_server":0,"currency":"usd","direction":"giver","description":"laptop2"}],"users":[{"user_id":-4,"uid":"117126429320850988781","provider":"google_oauth2","user_name":"Jan Mobilos Roslind","api_profile_picture_url":"https://lh4.googleusercontent.com/-OaSW5VjFv4k/AAAAAAAAAAI/AAAAAAAAAB4/r6YxZoPJsSg/photo.jpg?sz=100"}],"servers":[{"server_id":0,"sha256":"c7RMen6sdUjB1rmBdtZIpqQyvzJuV9+sNDceb3Ae7d0="}],"request_mid":"14484665496263596255","pass":0,"mutual_friends":[3]}
GiftService.receive_message_send_gifts: msg.pass = 0
GiftService.validate_send_gifts_message: validating send_gifts message after received
GiftService.validate_send_gifts_message: mutual_friends = ["1ZvuCxcvwezm+pWyTqyMg/m5P0T7ql0qVNUwQpUcRKE=","ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c="]
GiftService.validate_send_gifts_message: send_gifts_received_user_ids  = -4
GiftService.validate_send_gifts_message: send_gifts_expected_user_ids  = -4
GiftService.validate_send_gifts_message: send_gift_missing_user_ids    =
GiftService.validate_send_gifts_message: send_gift_unexpected_user_ids =
GiftService.invalid_gift: new_users_index = {"-4":{"user_id":-4,"uid":"117126429320850988781","provider":"google_oauth2","user_name":"Jan Mobilos Roslind","api_profile_picture_url":"https://lh4.googleusercontent.com/-OaSW5VjFv4k/AAAAAAAAAAI/AAAAAAAAAB4/r6YxZoPJsSg/photo.jpg?sz=100"}}
GiftService.gift_sha256_for_client: gid = 14481197074000741072, in_gifts = false, comments_str = 0, sha256 = G1p¬°√ì¬§√î>?'N^*√Ü√èm¬ù¬ø√≥7¬è¬¶(¬Ö√Ω¬πF¬ï*¬ß√Ç√Å, sha256_gift = r√¶¬ã¬¥¬∏√Ä√í√Ø¬Ωf√ï¬∑√ë
¬ü/¬æ¬¨E√Æ√éf4¬ÅsF1lG>c, sha256_comments = _√¨√´f√ø√ào8√ôRxlmily√Ç√õ√Ç9√ùN¬ë¬¥g)√ó:'√ªW√©
GiftService.receive_message_send_gifts: other_server_id_to_sha256 = {"0":"c7RMen6sdUjB1rmBdtZIpqQyvzJuV9+sNDceb3Ae7d0="}
GiftService.receive_message_send_gifts: pass = 1, error report not full implemented
GiftService.receive_message_send_gifts: Ok. Received gifts 14481197074000741072 already up-to-date
GiftService.receive_message_send_gifts: todo: everything is ok. send OK message to other client?
GiftService.process_messages: mailbox.read.length = 0

client 2:

TextService loaded
NotiService loaded
UserService loaded
UserService.init_friends: friends = [{"user_id":2,"uid":"1616942831872982","provider":"facebook","user_name":"Jan Mobilos Roslind","friend":1,"api_profile_picture_url":"https://fbcdn-profile-a.akamaihd.net/hprofile-ak-prn2/v/t1.0-1/c17.0.100.10‚Ä¶f5d8b9d28b&oe=56AD78F9&__gda__=1457908312_6770c57900abaa6ef8c56577b4bc2f6f","sha256":"URutwCLSHDcK/IOpBOSvwEEwO65TDITv9QGyRAQLzbo=","remote_sha256":{"1":"ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c="}},{"user_id":3,"uid":"4878645699741","provider":"facebook","user_name":"Jan Roslind","friend":2,"api_profile_picture_url":"https://fbcdn-profile-a.akamaihd.net/hprofile-ak-xaf1/v/t1.0-1/c0.0.100.100‚Ä¶e69911beba&oe=56EE73C0&__gda__=1457651594_08d4411bec425bcc33a29ca920f1da82","sha256":"P4ZEqEHSYL/CCThSP5inVCDbNZYRiRCLtAy/84ZksBA=","remote_sha256":{"1":"1ZvuCxcvwezm+pWyTqyMg/m5P0T7ql0qVNUwQpUcRKE="}},{"user_id":4,"uid":"117126429320850988781","provider":"google_oauth2","user_name":"Jan Mobilos Roslind","friend":1,"api_profile_picture_url":"https://lh4.googleusercontent.com/-OaSW5VjFv4k/AAAAAAAAAAI/AAAAAAAAAB4/r6YxZoPJsSg/photo.jpg?sz=100"},{"user_id":5,"uid":"113703200528116224701","provider":"google_oauth2","user_name":"Anitta limkilde-kj√¶r","friend":3,"api_profile_picture_url":"https://lh4.googleusercontent.com/-vgZD_bBbcCU/AAAAAAAAAAI/AAAAAAAAACI/s73HGTddRr8/photo.jpg?sz=50"},{"user_id":6,"uid":"102648158892233211696","provider":"google_oauth2","user_name":"Annastasia Damgaard Jespersen","friend":3,"api_profile_picture_url":"https://lh6.googleusercontent.com/-ntpPasQhI3c/AAAAAAAAAAI/AAAAAAAAAB4/c7uummmJgj0/photo.jpg?sz=50"},{"user_id":7,"uid":"111686936238581783326","provider":"google_oauth2","user_name":"Dream Coach","friend":3,"api_profile_picture_url":"https://lh3.googleusercontent.com/-hUqqNQvn424/AAAAAAAAAAI/AAAAAAAAAes/7t3lUe9SfXU/photo.jpg?sz=50"},{"user_id":8,"uid":"117657151428689087350","provider":"google_oauth2","user_name":"Jan Roslind","friend":3,"api_profile_picture_url":"https://lh5.googleusercontent.com/-58Ne1gy6H2Y/AAAAAAAAAAI/AAAAAAAAAIc/tc2IBIr9yjY/photo.jpg?sz=50"}]
UserService.load_users: users = [{"user_id":2,"uid":"1616942831872982","provider":"facebook","user_name":"Jan Mobilos Roslind","api_profile_picture_url":"https://fbcdn-profile-a.akamaihd.net/hprofile-ak-prn2/v/t1.0-1/c17.0.100.10‚Ä¶f5d8b9d28b&oe=56AD78F9&__gda__=1457908312_6770c57900abaa6ef8c56577b4bc2f6f","verified_at":1448119707},{"user_id":4,"uid":"117126429320850988781","provider":"google_oauth2","user_name":"Jan Mobilos Roslind","api_profile_picture_url":"https://lh4.googleusercontent.com/-OaSW5VjFv4k/AAAAAAAAAAI/AAAAAAAAAB4/r6YxZoPJsSg/photo.jpg?sz=100","verified_at":1448119707},{"user_id":3,"uid":"4878645699741","provider":"facebook","user_name":"Jan Roslind","api_profile_picture_url":"https://fbcdn-profile-a.akamaihd.net/hprofile-ak-xaf1/v/t1.0-1/c0.0.100.100‚Ä¶e69911beba&oe=56EE73C0&__gda__=1457651594_08d4411bec425bcc33a29ca920f1da82"}]
GiftService loaded
GiftService.invalid_gift: new_users_index = {}
GiftService.gift_sha256_for_client: gid = 14481196979194894893, in_gifts = true, comments_str = 0, sha256 = √∞K`√∂√ê¬ôg√¢¬âf¬∏¬ø, Z¬©√∏	+√µ√†RQ√û¬π√™,Z, sha256_gift = √ß¬õ¬æ¬è¬à7√§¬≠¬ù√•S¬â¬æ}√ö√Ö0G-Oa¬£j√É¬Ω+¬ªG, sha256_comments = _√¨√´f√ø√ào8√ôRxlmily√Ç√õ√Ç9√ùN¬ë¬¥g)√ó:'√ªW√©
GiftService.load_gifts: gift = {"gid":"14481196979194894893","direction":"giver","giver_user_ids":[3],"receiver_user_ids":[],"created_at_client":1448119697,"created_at_server":1,"currency":"usd","description":"laptop","show":true,"comments":[],"sha256":"√∞K`√∂√ê¬ôg√¢¬âf¬∏¬ø, Z¬©√∏\t+√µ\u001a√†\u0012RQ\u0018\b√û¬π√™,Z","sha256_gift":"√ß¬õ¬æ¬è¬à7√§¬≠¬ù\u001b√•S\u0015¬â¬æ}\u0016√ö√Ö0G\u0015-Oa¬£j√É¬Ω+¬ªG","sha256_comments":"_√¨√´f√ø√ào8√ôRxlmily√Ç√õ√Ç9√ùN¬ë¬¥g)√ó:'√ªW√©"}
GiftService.invalid_gift: new_users_index = {}
GiftService.gift_sha256_for_client: gid = 14481197074000741072, in_gifts = true, comments_str = 0, sha256 = G1p¬°√ì¬§√î>?'N^*√Ü√èm¬ù¬ø√≥7¬è¬¶(¬Ö√Ω¬πF¬ï*¬ß√Ç√Å, sha256_gift = r√¶¬ã¬¥¬∏√Ä√í√Ø¬Ωf√ï¬∑√ë
¬ü/¬æ¬¨E√Æ√éf4¬ÅsF1lG>c, sha256_comments = _√¨√´f√ø√ào8√ôRxlmily√Ç√õ√Ç9√ùN¬ë¬¥g)√ó:'√ªW√©
GiftService.load_gifts: gift = {"gid":"14481197074000741072","giver_user_ids":[2,4],"receiver_user_ids":[],"created_at_client":1448119707,"currency":"usd","direction":"giver","description":"laptop2","show":true,"comments":[],"created_at_server":0,"sha256":"G1p¬°√ì¬§√î>?'N^*√Ü√èm¬ù¬ø√≥7¬è¬¶(¬Ö√Ω¬πF¬ï*¬ß√Ç√Å","sha256_gift":"r√¶¬ã¬¥¬∏√Ä√í√Ø¬Ωf√ï¬∑\u001c√ë\r¬ü/¬æ¬¨E√Æ√éf4¬ÅsF1lG>c","sha256_comments":"_√¨√´f√ø√ào8√ôRxlmily√Ç√õ√Ç9√ùN¬ë¬¥g)√ó:'√ªW√©"}
GiftService.load_gifts: gifts.length = 2
NavCtrl loaded
NavCtrl.start ping process. start up ping interval = 2000
Synchronous XMLHttpRequest on the main thread is deprecated because of its detrimental effects to the end user's experience. For more help, check http://xhr.spec.whatwg.org/.
GiftsCtrl loaded
NavCtrl.do_tasks: start
GiftService.update_mailboxes: New online mailbox {"did":"14481194806251567148","sha256":"3Rf35epojarDFzMj6laxbNhhxqyzznBcBsjJQE8BmSI=","mutual_friends":[2,3],"server_id":1,"key":"144811948062515671483Rf35epojarDFzMj6laxbNhhxqyzznBcBsjJQE8BmSI=","online":true,"inbox":[],"read":[],"outbox":[],"sending":[],"sent":[],"done":[],"error":[]} with mutual friends 2, 3. Added message = {"mid":"14484665303579595932","msgtype":"users_sha256","users":[2,3]} to outbox
GiftService.pubkeys_request: request = ["14481194806251567148"]
GiftService.send_messages: Wait. Public key has not yet been received for device 14481194806251567148
GiftService.pubkeys_response: pubkeys = [{"did":"14481194806251567148","pubkey":"-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAsxTUNvxKmghmhLA9wHrm\nZSPW6r1YPh63vRG/LDegVhR9T1O/+HfO6qJ6ic31Fny4vtZhvD+K6NYq8laLOYcZ\nSAQMHjR8rQdn/ttasYyn/I0+7wcNtgFQMz0f7oj9RORputUN6RjGbytIaixrGZrf\nZGezXN31wjEahkeZzNnQ9kB9sFLJj3M5HhWyEgnAsKqKFZjjc0kAaeHH0lV6m6Vm\nAwa8VwS5w83rfLXKlZASmiPFXFCUGE8iOYPtHGia4IcMzCwma01895LSemprKodR\nIlSOrspZCcu7ekJH5DwpFiMRv7/b4awsLrpKyJ3WfJwPd9QWdD2e/dqH7CSMtMDp\n4QIDAQAB\n-----END PUBLIC KEY-----"}]
GiftService.send_messages: symmetric password setup: generated password1
GiftService.send_messages: symmetric password setup: sending rsa message
GiftService.receive_messages: message_with_envelope = {"sender_did":"14481194806251567148","server":false,"encryption":"rsa","message":"ha2aa1s3l/VsrZ016X1hj+/WyChLtWGotlHNdgG7Kab0As91A+mJuZ7/l33SCfkX9Mu2YYZI4vE/raNEVb63TtVScS50RTgzTP3SPnTholGfL2pqdOVaBDd0jFJEvNNRj11BtLx5/24m1jKK4rt8e3lzylzhS1tc7ZCTbar/RYUK0wpsckip5bod29gcptCFDpbV3wWnm36OU/t25/gciJyYJ3juO8dJL/lPMcTJKfBF3hm9fLrUtetodchLwAAb5G1c5PA/aCuKyVhYDqfKXCDrgQfYz2+BzkEY9iuZSZFs1U86TTkhFfWW/p+WsmWpy8qDtae3dLTC7BIbSKCQjg==","receiver_did":"14481195855569775932","sender_sha256":"3Rf35epojarDFzMj6laxbNhhxqyzznBcBsjJQE8BmSI="}
GiftService.setup_device_password: device.password = _t8t}vGUFUw?gel:aJ[yhUSlrsD7|)t9PEz0(b}=AK9jNM09P&!!8)Q#4+ar}(kUTh$8?/ZHoHE-2/j!
GiftService.receive_message_password: device.password = _t8t}vGUFUw?gel:aJ[yhUSlrsD7|)t9PEz0(b}=AK9jNM09P&!!8)Q#4+ar}(kUTh$8?/ZHoHE-2/j!
GiftService.receive_message_password: symmetric password setup in progress.
GiftService.receive_message_password: done = 0, md5_ok = false
GiftService.receive_messages: device.password = undefined
GiftService.receive_messages: message_with_envelope = {"sender_did":"14481194806251567148","server":false,"encryption":"rsa","message":"i7BsZwVPz1GnjRwGR7d1J0FJhU/c61w0a03ROiT49TTbbZR9lbA9EGdv4BBaMBBvXQV8ACsHohZ1QLV+J9ScK1VfbiTjSe58qfrq/BZH8f2tRjCJmyDO2zf6bAGuehtUgsEFwchJXSpQGL1j7EeR4lNOj5iBvkkcgWelD9tExVcpPKx3mTLTw3Ub/kVMeLPuiiLj4YObYPtA8BkyCghC1JkJUy0SL7vhEDOiBINMCEarqmfLp+8Qp5QV6j/a4bSOX6dNCfzhMvFtXORMY/MRExs31ZztcNJS7NxiVvPSilih6Ty8baZPwv6RhGaTRBdrmmN/1ocmDmiqXum8FcArkQ==","receiver_did":"14481195855569775932","sender_sha256":"3Rf35epojarDFzMj6laxbNhhxqyzznBcBsjJQE8BmSI="}
GiftService.setup_device_password: device.password = _t8t}vGUFUw?gel:aJ[yhUSlrsD7|)t9PEz0(b}=AK9jNM09P&!!8)Q#4+ar}(kUTh$8?/ZHoHE-2/j!
GiftService.receive_message_password: device.password = _t8t}vGUFUw?gel:aJ[yhUSlrsD7|)t9PEz0(b}=AK9jNM09P&!!8)Q#4+ar}(kUTh$8?/ZHoHE-2/j!
GiftService.receive_message_password: symmetric password setup in progress.
GiftService.receive_message_password: done = 0, md5_ok = false
GiftService.receive_messages: device.password = undefined
GiftService.setup_device_password: device.password = _t8t}vGUFUw?gel:aJ[yhUSlrsD7|)t9PEz0(b}=AK9jNM09P&!!8)Q#4+ar}(kUTh$8?/ZHoHE-2/j!
GiftService.send_messages: symmetric password setup: sending rsa message
GiftService.receive_messages: message_with_envelope = {"sender_did":"14481194806251567148","server":false,"encryption":"rsa","message":"gWWzXw3xEGKqHTTfbNLs56ZjDS26WuTCF6cwQALnjRf8Ml2IFS+HNFThnLsPcGlTM6toOcmaN4RMAjpVrj2i6meWFOXqNXUALwSSj44UmgPlpR+NLy5igasCd30+ZmflJVHloQUPnC/fsNkjAuOp3QS//4m2+QOLpuxaTvjUR+Y5QoQNWqoPaU20UVgDpfyO5ilo/IYrdAh6opdDC4zJUoDWQSVRIWo91nWkRvDEinsepPm9Rlxh5buT6KN9Ay79tSehZWhDzY+G1s+8ZyqtYk6htOrYS/ticFS10wYm7cG9Z3Zo8Dj+PvdpdXW4e8FyOrEiUPyai6WJpEtByFxrYQ==","receiver_did":"14481195855569775932","sender_sha256":"3Rf35epojarDFzMj6laxbNhhxqyzznBcBsjJQE8BmSI="}
GiftService.setup_device_password: device.password = _t8t}vGUFUw?gel:aJ[yhUSlrsD7|)t9PEz0(b}=AK9jNM09P&!!8)Q#4+ar}(kUTh$8?/ZHoHE-2/j!
GiftService.receive_message_password: device.password = _t8t}vGUFUw?gel:aJ[yhUSlrsD7|)t9PEz0(b}=AK9jNM09P&!!8)Q#4+ar}(kUTh$8?/ZHoHE-2/j!
GiftService.receive_message_password: symmetric password setup in progress.
GiftService.receive_message_password: done = 0, md5_ok = false
GiftService.receive_messages: device.password = undefined
GiftService.setup_device_password: device.password = _t8t}vGUFUw?gel:aJ[yhUSlrsD7|)t9PEz0(b}=AK9jNM09P&!!8)Q#4+ar}(kUTh$8?/ZHoHE-2/j!
GiftService.send_messages: symmetric password setup: sending rsa message
GiftService.receive_messages: message_with_envelope = {"sender_did":"14481194806251567148","server":false,"encryption":"rsa","message":"FBCcZnNENlCZ/vMzwjCPgL7AUcTenht8Zota2ksQt9jFZ7uW0m7iOZiJOmRss3zj9vnKiD+6Aqo68UbuyJw+QPoiiHiMxVPvt/nfQWEj4hl2hxGIwS4Y//nt7onaE7Kd3ZUkAyN9tq1MpuxBSoYsXedpBHjM/+cmAGgnz5108/UPK71rK9X/wNa8z4TU2Ug1p1D+uY0jnR8fOIbRrcwoBWvKAwxDyl2IDKL7PTGMVk4xxfBCd+sbvwKwVDg3GgSeH4KOnXXwc6s5r9FkyC3hiJ/9w595kcvmx37VVvDgJEMYDfvrj7UVJAn3tO60z2sxe66Y/24QjCdP1X+9hGU2bg==","receiver_did":"14481195855569775932","sender_sha256":"3Rf35epojarDFzMj6laxbNhhxqyzznBcBsjJQE8BmSI="}
GiftService.setup_device_password: device.password = _t8t}vGUFUw?gel:aJ[yhUSlrsD7|)t9PEz0(b}=AK9jNM09P&!!8)Q#4+ar}(kUTh$8?/ZHoHE-2/j!
GiftService.receive_message_password: device.password = _t8t}vGUFUw?gel:aJ[yhUSlrsD7|)t9PEz0(b}=AK9jNM09P&!!8)Q#4+ar}(kUTh$8?/ZHoHE-2/j!
GiftService.receive_message_password: symmetric password setup in progress.
GiftService.receive_message_password: done = 0, md5_ok = false
GiftService.receive_messages: device.password = undefined
GiftService.receive_messages: message_with_envelope = {"sender_did":"14481194806251567148","server":false,"encryption":"rsa","message":"hpITD+dws012GxtZNV0ZsU19N12ZtiXUUXkqCnh+gmFpEnzS8xk0jYf8cRBi6Uofb+17SI7OfjJH4hdGcNCA0NpZE6KJ1h7L0Dt+b6hLHFa07LVwazq6nU368EwISRtQwEzyD5BP/Y1xLhKbXgHK4GmVMfEqJ0UfrZiFsAf2r3gmYa4pGZVf3aN1MAp3vAuWlqB10osB3hTDi5TCm4O3SGKwcxQbfuYRh4MPmm3FD9bV0Pa4fCyn9/4q80gD0MVggr68oW7dedriEFDBAvZfe6VKKKXAh99S2yNVVxvbve7L6+27QiAEuiyZ7idAznQe1mgX6xMURgN6ztEM+uS+hg==","receiver_did":"14481195855569775932","sender_sha256":"3Rf35epojarDFzMj6laxbNhhxqyzznBcBsjJQE8BmSI="}
GiftService.setup_device_password: device.password = _t8t}vGUFUw?gel:aJ[yhUSlrsD7|)t9PEz0(b}=AK9jNM09P&!!8)Q#4+ar}(kUTh$8?/ZHoHE-2/j!
GiftService.receive_message_password: device.password = _t8t}vGUFUw?gel:aJ[yhUSlrsD7|)t9PEz0(b}=AK9jNM09P&!!8)Q#4+ar}(kUTh$8?/ZHoHE-2/j!
GiftService.receive_message_password: symmetric password setup completed.
GiftService.receive_message_password: done = 0, md5_ok = true
GiftService.receive_messages: device.password = _t8t}vGUFUw?gel:aJ[yhUSlrsD7|)t9PEz0(b}=AK9jNM09P&!!8)Q#4+ar}(kUTh$8?/ZHoHE-2/j!
GiftService.send_messages: msg = {"mid":"14484665303579595932","msgtype":"users_sha256","users":[2,3]}
UserService.user_ids_to_remote_sha256: mutual_friends = [2,3], typeof user_ids = object
GiftService.send_message_users_sha256: users_sha256_message = {"msgtype":"users_sha256","mid":"14484665303579595932","users":[{"user_id":"ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c=","sha256":"√≠(¬î√íWQ\r√òr\u0005¬à¬™i`\u0000√Ç%=\u0017¬É√ä{-√è√çn√≠\u001d¬µ√ÄY"},{"user_id":"1ZvuCxcvwezm+pWyTqyMg/m5P0T7ql0qVNUwQpUcRKE=","sha256":"¬ë¬™√•√ë{√≤kS√ù'√Æ\u000f13uZ√æ|√ß¬ß\u0012MAz[¬Ü|√ø-¬ª¬ñ\u0013"}]}
GiftService.send_messages: unencrypted message = {"sent_at_client":1448466545254,"messages":[{"msgtype":"users_sha256","mid":"14484665303579595932","users":[{"user_id":"ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c=","sha256":"√≠(¬î√íWQ\r√òr\u0005¬à¬™i`\u0000√Ç%=\u0017¬É√ä{-√è√çn√≠\u001d¬µ√ÄY"},{"user_id":"1ZvuCxcvwezm+pWyTqyMg/m5P0T7ql0qVNUwQpUcRKE=","sha256":"¬ë¬™√•√ë{√≤kS√ù'√Æ\u000f13uZ√æ|√ß¬ß\u0012MAz[¬Ü|√ø-¬ª¬ñ\u0013"}]}]}
GiftService.send_messages: message_with_envelope = {"receiver_did":"14481194806251567148","receiver_sha256":"3Rf35epojarDFzMj6laxbNhhxqyzznBcBsjJQE8BmSI=","server":false,"encryption":"sym","message":"U2FsdGVkX19+WxqzYDDLuGqy6MmdWyFhhWh8dtxUr260hPwifLCLmrnkFDSqQRiDFAggg4xmunV78o3hd8bkEeUFwKZEVwmCH0lyY+i2qQ68uR2V0dJWM4aXz6PrXWjecZa1sdf6nCjm8gIaT7wYRlENA9PV+Fjq/JEm1ywLKaeoE9h+tZbLO5cknfgWB+NJtDvv9sI33emmeUpwpapXMW/A6eLD1UUwJys1o3s5/bJn/e5cFmy1RFlKeuAkpkoi5GHimHHJOMjjX7e304jZ3L+Zx8tMZnRwyexPkpBTTLqnrpCUtT/Qnm3E8eABwE29to3K9lK1sWFlY0bKjxhXdYO4Nk71p7DVe+p9QEKNgSYixg1/y3I188W6bpHN6dxPuL9QrrqDtIopBWP9OZ3rYRfu0mGmyozv0NtZud1E/poxU6woSc6OhE7qIWn3f5o/9FT8CqdmUglV/w29KXxL3S66gLqglKvnLLI0dMu9KmdYqhWr5RkRD/HL+WOPMEtGRMkW0Tv4QbsJoA67iDTYmw=="}
GiftService.receive_message_users_sha256: mailbox = {"did":"14481194806251567148","sha256":"3Rf35epojarDFzMj6laxbNhhxqyzznBcBsjJQE8BmSI=","mutual_friends":[2,3],"server_id":1,"key":"144811948062515671483Rf35epojarDFzMj6laxbNhhxqyzznBcBsjJQE8BmSI=","online":true,"inbox":[],"read":[],"outbox":[],"sending":[],"sent":[{"msgtype":"users_sha256","mid":"14484665303579595932","users":[{"user_id":"ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c=","sha256":"√≠(¬î√íWQ\r√òr\u0005¬à¬™i`\u0000√Ç%=\u0017¬É√ä{-√è√çn√≠\u001d¬µ√ÄY"},{"user_id":"1ZvuCxcvwezm+pWyTqyMg/m5P0T7ql0qVNUwQpUcRKE=","sha256":"¬ë¬™√•√ë{√≤kS√ù'√Æ\u000f13uZ√æ|√ß¬ß\u0012MAz[¬Ü|√ø-¬ª¬ñ\u0013"}]}],"done":[],"error":[]}
GiftService.receive_message_users_sha256: msg     = {"msgtype":"users_sha256","mid":"14484665263463456499","users":[{"user_id":"P4ZEqEHSYL/CCThSP5inVCDbNZYRiRCLtAy/84ZksBA=","sha256":"¬ë¬™√•√ë{√≤kS√ù'√Æ\u000f13uZ√æ|√ß¬ß\u0012MAz[¬Ü|√ø-¬ª¬ñ\u0013"},{"user_id":"URutwCLSHDcK/IOpBOSvwEEwO65TDITv9QGyRAQLzbo="}]}
GiftService.receive_message_users_sha256: users_sha256 message from client on an other Gofreerev server. Translate sha256 signatures in msg.users to internal user ids
GiftService.receive_message_users_sha256: msg.users (1) = [{"user_id":"P4ZEqEHSYL/CCThSP5inVCDbNZYRiRCLtAy/84ZksBA=","sha256":"¬ë¬™√•√ë{√≤kS√ù'√Æ\u000f13uZ√æ|√ß¬ß\u0012MAz[¬Ü|√ø-¬ª¬ñ\u0013"},{"user_id":"URutwCLSHDcK/IOpBOSvwEEwO65TDITv9QGyRAQLzbo="}]
GiftService.receive_message_users_sha256: translating sha256 user_id URutwCLSHDcK/IOpBOSvwEEwO65TDITv9QGyRAQLzbo= to internal user_id 2
GiftService.receive_message_users_sha256: translating sha256 user_id P4ZEqEHSYL/CCThSP5inVCDbNZYRiRCLtAy/84ZksBA= to internal user_id 3
GiftService.receive_message_users_sha256: msg.users (2) = [{"user_id":3,"sha256":"¬ë¬™√•√ë{√≤kS√ù'√Æ\u000f13uZ√æ|√ß¬ß\u0012MAz[¬Ü|√ø-¬ª¬ñ\u0013"},{"user_id":2}]
GiftService.receive_message_users_sha256: msg_users = [3,2], my_mutual_friends = [2,3], invalid_user_ids = []
GiftService.receive_message_users_sha256: sha256_hash = {"2":{"my_sha256":"√≠(¬î√íWQ\r√òr\u0005¬à¬™i`\u0000√Ç%=\u0017¬É√ä{-√è√çn√≠\u001d¬µ√ÄY"},"3":{"my_sha256":"¬ë¬™√•√ë{√≤kS√ù'√Æ\u000f13uZ√æ|√ß¬ß\u0012MAz[¬Ü|√ø-¬ª¬ñ\u0013","msg_sha256":"¬ë¬™√•√ë{√≤kS√ù'√Æ\u000f13uZ√æ|√ß¬ß\u0012MAz[¬Ü|√ø-¬ª¬ñ\u0013"}}
GiftService.receive_message_users_sha256: user_ids = 2
GiftService.receive_message_users_sha256: user_id_gifts_index[2].length = 1
GiftService.receive_message_users_sha256: gifts_sha256_hash = {"14481197074000741072":"G1p¬°√ì¬§√î>?'N^*√Ü√èm¬ù¬ø√≥7¬è¬¶(¬Ö√Ω¬πF¬ï*¬ß√Ç√Å"}
GiftService.receive_message_users_sha256: gifts_sha256_message (1) = {"mid":"14484665453905913561","request_mid":"14484665263463456499","msgtype":"gifts_sha256","ignore_invalid_gifts":[],"users":[2],"gifts":[{"gid":"14481197074000741072","sha256":"G1p¬°√ì¬§√î>?'N^*√Ü√èm¬ù¬ø√≥7¬è¬¶(¬Ö√Ω¬πF¬ï*¬ß√Ç√Å"}]}
UserService.user_ids_to_remote_sha256: mutual_friends = [2], typeof user_ids = object
GiftService.receive_message_users_sha256: gifts_sha256_message (2) = {"mid":"14484665453905913561","request_mid":"14484665263463456499","msgtype":"gifts_sha256","ignore_invalid_gifts":[],"users":["ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c="],"gifts":[{"gid":"14481197074000741072","sha256":"G1p¬°√ì¬§√î>?'N^*√Ü√èm¬ù¬ø√≥7¬è¬¶(¬Ö√Ω¬πF¬ï*¬ß√Ç√Å"}]}
GiftService.send_messages: msg = {"mid":"14484665453905913561","request_mid":"14484665263463456499","msgtype":"gifts_sha256","ignore_invalid_gifts":[],"users":["ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c="],"gifts":[{"gid":"14481197074000741072","sha256":"G1p¬°√ì¬§√î>?'N^*√Ü√èm¬ù¬ø√≥7¬è¬¶(¬Ö√Ω¬πF¬ï*¬ß√Ç√Å"}]}
GiftService.send_messages: unencrypted message = {"sent_at_client":1448466548247,"messages":[{"mid":"14484665453905913561","request_mid":"14484665263463456499","msgtype":"gifts_sha256","ignore_invalid_gifts":[],"users":["ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c="],"gifts":[{"gid":"14481197074000741072","sha256":"G1p¬°√ì¬§√î>?'N^*√Ü√èm¬ù¬ø√≥7¬è¬¶(¬Ö√Ω¬πF¬ï*¬ß√Ç√Å"}]}]}
GiftService.send_messages: message_with_envelope = {"receiver_did":"14481194806251567148","receiver_sha256":"3Rf35epojarDFzMj6laxbNhhxqyzznBcBsjJQE8BmSI=","server":false,"encryption":"sym","message":"U2FsdGVkX185AH9Kp6bmAuSwraq2JnHSBM4In1QJbFINHc2tYofkvELp1SQPM6Z4I5ZRRd7OQosErKlp5uvLxjdf0lixmMmW0SDfnm47Lsh7OyjkyR/LU0f/tdYm69XEhVeg5uUWlUXRL7prUZpx9yMBe3ycvqU97CRQDRMU7Y4D/1VdhWEI3/czghfUmpP3N5iZlw3G/dKrJN0N7A6ZX7dqik1eWM9hLdWFhG3Zn+9PUw0QoGXtbKpN5RYr/mtGgtLU8RiyTBpS8VIY4bBqJct4flId4sHJvFkzVdwAmXun398MXNBoF3y5naglCDWnqeT6/8X7eGnzFvIcpoAAp+K88Hj1dyfY/zTs0ab7dJ/irh6sCH1i+LpCWKUMvCwtxXnFn28YyxxLZ7QiD1+E5Lb8dpgH5j8/nRae1lcNAnGgoeFf7xr4t8mYT7MP1fwh5dt6TuIrEO/+cEQO98SRkg=="}
GiftService.receive_message_gifts_sha256: mailbox = {"did":"14481194806251567148","sha256":"3Rf35epojarDFzMj6laxbNhhxqyzznBcBsjJQE8BmSI=","mutual_friends":[2,3],"server_id":1,"key":"144811948062515671483Rf35epojarDFzMj6laxbNhhxqyzznBcBsjJQE8BmSI=","online":true,"inbox":[],"read":[],"outbox":[],"sending":[],"sent":[{"msgtype":"users_sha256","mid":"14484665303579595932","users":[{"user_id":"ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c=","sha256":"√≠(¬î√íWQ\r√òr\u0005¬à¬™i`\u0000√Ç%=\u0017¬É√ä{-√è√çn√≠\u001d¬µ√ÄY"},{"user_id":"1ZvuCxcvwezm+pWyTqyMg/m5P0T7ql0qVNUwQpUcRKE=","sha256":"¬ë¬™√•√ë{√≤kS√ù'√Æ\u000f13uZ√æ|√ß¬ß\u0012MAz[¬Ü|√ø-¬ª¬ñ\u0013"}]},{"mid":"14484665453905913561","request_mid":"14484665263463456499","msgtype":"gifts_sha256","ignore_invalid_gifts":[],"users":["ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c="],"gifts":[{"gid":"14481197074000741072","sha256":"G1p¬°√ì¬§√î>?'N^*√Ü√èm¬ù¬ø√≥7¬è¬¶(¬Ö√Ω¬πF¬ï*¬ß√Ç√Å"}]}],"done":[],"error":[]}
GiftService.receive_message_gifts_sha256: msg     = {"mid":"14484665475410674004","request_mid":"14484665303579595932","msgtype":"gifts_sha256","ignore_invalid_gifts":[],"users":["URutwCLSHDcK/IOpBOSvwEEwO65TDITv9QGyRAQLzbo="],"gifts":[]}
GiftService.move_previous_message: Moving old users_sha256 message 14484665303579595932 from sent to done folder.
GiftService.receive_message_gifts_sha256: gifts_sha256 message from client on an other Gofreerev server. Translate sha256 signatures in msg.users to internal user ids
GiftService.receive_message_gifts_sha256: msg.users (1) = ["URutwCLSHDcK/IOpBOSvwEEwO65TDITv9QGyRAQLzbo="]
GiftService.receive_message_gifts_sha256: translating sha256 user_id URutwCLSHDcK/IOpBOSvwEEwO65TDITv9QGyRAQLzbo= to internal user_id 2
GiftService.receive_message_gifts_sha256: msg.users (2) = [2]
GiftService.receive_message_gifts_sha256: user_id_gifts_index[2].length = 1
GiftService.receive_message_gifts_sha256: send_gids = 14481197074000741072
GiftService.invalid_gift: new_users_index = {}
GiftService.invalid_gift: new_users_index = {}
GiftService.receive_message_gifts_sha256: sync_gifts_message = {"mid":"14484665543554883231","request_mid":"14484665475410674004","msgtype":"sync_gifts","mutual_friends":[2],"send_gifts":{"mid":"14484665543554413319","msgtype":"send_gifts","gifts":[{"gid":"14481197074000741072","giver_user_ids":[2,4],"receiver_user_ids":[],"created_at_client":1448119707,"created_at_server":0,"currency":"usd","direction":"giver","description":"laptop2"}],"users":[{"user_id":4,"uid":"117126429320850988781","provider":"google_oauth2","user_name":"Jan Mobilos Roslind","api_profile_picture_url":"https://lh4.googleusercontent.com/-OaSW5VjFv4k/AAAAAAAAAAI/AAAAAAAAAB4/r6YxZoPJsSg/photo.jpg?sz=100"}]},"request_gifts":null,"check_gifts":null}
GiftService.sync_gifts_translate_user_ids: sync_gifts_message (1) = {"mid":"14484665543554883231","request_mid":"14484665475410674004","msgtype":"sync_gifts","mutual_friends":[2],"send_gifts":{"mid":"14484665543554413319","msgtype":"send_gifts","gifts":[{"gid":"14481197074000741072","giver_user_ids":[2,4],"receiver_user_ids":[],"created_at_client":1448119707,"created_at_server":0,"currency":"usd","direction":"giver","description":"laptop2"}],"users":[{"user_id":4,"uid":"117126429320850988781","provider":"google_oauth2","user_name":"Jan Mobilos Roslind","api_profile_picture_url":"https://lh4.googleusercontent.com/-OaSW5VjFv4k/AAAAAAAAAAI/AAAAAAAAAB4/r6YxZoPJsSg/photo.jpg?sz=100"}]},"request_gifts":null,"check_gifts":null}
UserService.user_ids_to_remote_sha256: mutual_friends = [2], typeof user_ids = object
UserService.user_ids_to_remote_sha256: gift.giver_user_ids = [2,4], typeof user_ids = object
UserService.user_ids_to_remote_sha256: Warning for gift.giver_user_ids array. User id 4 do not have a remote sha256 signature. Using negative user_id -4 in sync_gifts message
UserService.user_ids_to_remote_sha256: gift.receiver_user_ids = [], typeof user_ids = object
UserService.user_ids_to_remote_sha256: send_gifts.users = [4], typeof user_ids = object
UserService.user_ids_to_remote_sha256: Warning for send_gifts.users array. User id 4 do not have a remote sha256 signature. Using negative user_id -4 in sync_gifts message
GiftService.sync_gifts_translate_user_ids: sync_gifts_message (2) = {"mid":"14484665543554883231","request_mid":"14484665475410674004","msgtype":"sync_gifts","mutual_friends":["ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c="],"send_gifts":{"mid":"14484665543554413319","msgtype":"send_gifts","gifts":[{"gid":"14481197074000741072","giver_user_ids":["ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c=",-4],"receiver_user_ids":[],"created_at_client":1448119707,"created_at_server":0,"currency":"usd","direction":"giver","description":"laptop2"}],"users":[{"user_id":-4,"uid":"117126429320850988781","provider":"google_oauth2","user_name":"Jan Mobilos Roslind","api_profile_picture_url":"https://lh4.googleusercontent.com/-OaSW5VjFv4k/AAAAAAAAAAI/AAAAAAAAAB4/r6YxZoPJsSg/photo.jpg?sz=100"}]},"request_gifts":null,"check_gifts":null}
GiftService.sync_gifts_translate_user_ids: sync_gifts_message (3) = {"mid":"14484665543554883231","request_mid":"14484665475410674004","msgtype":"sync_gifts","mutual_friends":["ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c="],"send_gifts":{"mid":"14484665543554413319","msgtype":"send_gifts","gifts":[{"gid":"14481197074000741072","giver_user_ids":["ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c=",-4],"receiver_user_ids":[],"created_at_client":1448119707,"created_at_server":0,"currency":"usd","direction":"giver","description":"laptop2"}],"users":[{"user_id":-4,"uid":"117126429320850988781","provider":"google_oauth2","user_name":"Jan Mobilos Roslind","api_profile_picture_url":"https://lh4.googleusercontent.com/-OaSW5VjFv4k/AAAAAAAAAAI/AAAAAAAAAB4/r6YxZoPJsSg/photo.jpg?sz=100"}],"servers":[{"server_id":0,"sha256":"c7RMen6sdUjB1rmBdtZIpqQyvzJuV9+sNDceb3Ae7d0="}]},"request_gifts":null,"check_gifts":null}
GiftService.validate_send_gifts_message: validating send_gifts message before send
UserService.user_ids_to_remote_sha256: mutual_friends = [2,3], typeof user_ids = object
GiftService.validate_send_gifts_message: mutual_friends = ["ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c=","1ZvuCxcvwezm+pWyTqyMg/m5P0T7ql0qVNUwQpUcRKE="]
GiftService.validate_send_gifts_message: send_gifts_received_user_ids  = -4
GiftService.validate_send_gifts_message: send_gifts_expected_user_ids  = -4
GiftService.validate_send_gifts_message: send_gift_missing_user_ids    =
GiftService.validate_send_gifts_message: send_gift_unexpected_user_ids =
GiftService.send_messages: msg = {"mid":"14484665543554883231","request_mid":"14484665475410674004","msgtype":"sync_gifts","mutual_friends":["ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c="],"send_gifts":{"mid":"14484665543554413319","msgtype":"send_gifts","gifts":[{"gid":"14481197074000741072","giver_user_ids":["ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c=",-4],"receiver_user_ids":[],"created_at_client":1448119707,"created_at_server":0,"currency":"usd","direction":"giver","description":"laptop2"}],"users":[{"user_id":-4,"uid":"117126429320850988781","provider":"google_oauth2","user_name":"Jan Mobilos Roslind","api_profile_picture_url":"https://lh4.googleusercontent.com/-OaSW5VjFv4k/AAAAAAAAAAI/AAAAAAAAAB4/r6YxZoPJsSg/photo.jpg?sz=100"}],"servers":[{"server_id":0,"sha256":"c7RMen6sdUjB1rmBdtZIpqQyvzJuV9+sNDceb3Ae7d0="}]}}
GiftService.send_messages: unencrypted message = {"sent_at_client":1448466557248,"messages":[{"mid":"14484665543554883231","request_mid":"14484665475410674004","msgtype":"sync_gifts","mutual_friends":["ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c="],"send_gifts":{"mid":"14484665543554413319","msgtype":"send_gifts","gifts":[{"gid":"14481197074000741072","giver_user_ids":["ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c=",-4],"receiver_user_ids":[],"created_at_client":1448119707,"created_at_server":0,"currency":"usd","direction":"giver","description":"laptop2"}],"users":[{"user_id":-4,"uid":"117126429320850988781","provider":"google_oauth2","user_name":"Jan Mobilos Roslind","api_profile_picture_url":"https://lh4.googleusercontent.com/-OaSW5VjFv4k/AAAAAAAAAAI/AAAAAAAAAB4/r6YxZoPJsSg/photo.jpg?sz=100"}],"servers":[{"server_id":0,"sha256":"c7RMen6sdUjB1rmBdtZIpqQyvzJuV9+sNDceb3Ae7d0="}]}}]}
GiftService.send_messages: message_with_envelope = {"receiver_did":"14481194806251567148","receiver_sha256":"3Rf35epojarDFzMj6laxbNhhxqyzznBcBsjJQE8BmSI=","server":false,"encryption":"sym","message":"U2FsdGVkX19QPlBujbnvtlyDGZHzzcdUEdm13ujeSSCqz8HpUk6BkTTZuCgHKy4rLSb3ZM3rnctCKdlGM+zg/+kk2AX9UaW8I8+LN4k9381LBNB7AMxvHkDddoHGLdTz8qkQV0jNTS7Uzl74uvriAJG1xSKzq9wn69xPuodG/m8S/Uzqn15oK1Z4oWNTugFEdB+drFzszXCrCgzIxyjuvAaoDqJieEMfcRMuXgVRE5r6Zk2tU7j2CYZYfor/Ah/+sE5haToMdnIx4aOejkH3hh5A/Uh9HTpPb2rLTTRxOeQi/3cUxiIJfhu/uZ3K+uQJQ6cUN8I57tsQ9V7E0e/pnhXpqXDmMLmB+1ZU0jxLTn1fkT3x519dNOLe7MmIgMCwBaXKgmL0raBJDJ66pbQZTpD44PP6W1IzciRcrw1OnvGwpXhDpZzidMlfq/OuS6NB8h/KhGYwDTf/IvknBfLPpVsHSghek1ir3r0usHvs2sHJ9PiHn1mJo4P4UO3znf7PEsRlJ2t+kzCeJa1MeZQUk5fZi8pigyXpVo9jEcwcbcFcaRGXEuBoXN2dpZuIdobyLlP3l/WnvtGOUxX7MTMRJdTazoy8ysCcCNQjw9EMLrl2KlaOLnurqIuyBBxUdLl41llVG69wnkW1Hrvke4akxIth5onkWT4a18DzxSH6pnnVoEMdF41Km+F4asfWTJrl7HJ2PKMnxgLGXMr7CweEQYQvgvA0+TW1iJtLMZkjWbyRF61Rf22axxJ2xXe8tRi44cHjk/6T29nTFdHP5u2OPiOTifoeQbme/meLxIkDwmHyB1ja6SSZrAqshhli3cgFxCQtZDSh6o/LvYUxci+lGvzvf4RlNm0gCkZK7YYMFr6SAagNIN0xGSCOyP4aNYlBkawrbrkWZGyX0KHgwvgARN9eBwV1ApYXBrnMSxb8Xu6Cx6/vVIy2cvIYuWgIjq5qXWqnGQehnM3N3e+hvAPQVms6VPsgy3hv9qMU84TeYyE/zTigKi2VY+Ii9Vb14BpUvu+Kf3ExfKvp6vyEZEUwFnTQb23Lg2szo1FyHafpw2A78AlKsDAQvL97C2Fz2NIXIUt4Rtr6VEPyoc88klFItaBzAK0WjdOhTkTm9gypI/KwXo/ZN+NB0xkNGTBUosbP"}
GiftService.receive_message_sync_gifts: mailbox  = {"did":"14481194806251567148","sha256":"3Rf35epojarDFzMj6laxbNhhxqyzznBcBsjJQE8BmSI=","mutual_friends":[2,3],"server_id":1,"key":"144811948062515671483Rf35epojarDFzMj6laxbNhhxqyzznBcBsjJQE8BmSI=","online":true,"inbox":[],"read":[],"outbox":[],"sending":[],"sent":[{"mid":"14484665453905913561","request_mid":"14484665263463456499","msgtype":"gifts_sha256","ignore_invalid_gifts":[],"users":["ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c="],"gifts":[{"gid":"14481197074000741072","sha256":"G1p¬°√ì¬§√î>?'N^*√Ü√èm¬ù¬ø√≥7¬è¬¶(¬Ö√Ω¬πF¬ï*¬ß√Ç√Å"}]},{"mid":"14484665543554413319","msgtype":"send_gifts","gifts":[{"gid":"14481197074000741072","giver_user_ids":["ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c=",-4],"receiver_user_ids":[],"created_at_client":1448119707,"created_at_server":0,"currency":"usd","direction":"giver","description":"laptop2"}],"users":[{"user_id":-4,"uid":"117126429320850988781","provider":"google_oauth2","user_name":"Jan Mobilos Roslind","api_profile_picture_url":"https://lh4.googleusercontent.com/-OaSW5VjFv4k/AAAAAAAAAAI/AAAAAAAAAB4/r6YxZoPJsSg/photo.jpg?sz=100"}],"servers":[{"server_id":0,"sha256":"c7RMen6sdUjB1rmBdtZIpqQyvzJuV9+sNDceb3Ae7d0="}]}],"done":[{"msgtype":"users_sha256","mid":"14484665303579595932","users":[{"user_id":"ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c=","sha256":"√≠(¬î√íWQ\r√òr\u0005¬à¬™i`\u0000√Ç%=\u0017¬É√ä{-√è√çn√≠\u001d¬µ√ÄY"},{"user_id":"1ZvuCxcvwezm+pWyTqyMg/m5P0T7ql0qVNUwQpUcRKE=","sha256":"¬ë¬™√•√ë{√≤kS√ù'√Æ\u000f13uZ√æ|√ß¬ß\u0012MAz[¬Ü|√ø-¬ª¬ñ\u0013"}]}],"error":[]}
GiftService.receive_message_sync_gifts: msg      = {"mid":"14484665496260141069","request_mid":"14484665453905913561","msgtype":"sync_gifts","mutual_friends":["URutwCLSHDcK/IOpBOSvwEEwO65TDITv9QGyRAQLzbo="],"request_gifts":{"mid":"14484665496263596255","msgtype":"request_gifts","gifts":["14481197074000741072"]}}
GiftService.move_previous_message: Moving old gifts_sha256 message 14484665453905913561 from sent to done folder.
GiftService.receive_message_sync_gifts: sync_gifts message from client on an other Gofreerev server. Translate sha256 signatures in msg.users to internal user ids
GiftService.receive_message_sync_gifts: msg.mutual_friends (1) = ["URutwCLSHDcK/IOpBOSvwEEwO65TDITv9QGyRAQLzbo="]
GiftService.receive_message_sync_gifts: translating sha256 user_id URutwCLSHDcK/IOpBOSvwEEwO65TDITv9QGyRAQLzbo= to internal user_id 2
GiftService.receive_message_sync_gifts: msg.mutual_friends (2) = [2]
GiftService.receive_message_request_gifts: mailbox  = {"did":"14481194806251567148","sha256":"3Rf35epojarDFzMj6laxbNhhxqyzznBcBsjJQE8BmSI=","mutual_friends":[2,3],"server_id":1,"key":"144811948062515671483Rf35epojarDFzMj6laxbNhhxqyzznBcBsjJQE8BmSI=","online":true,"inbox":[],"read":[],"outbox":[],"sending":[],"sent":[{"mid":"14484665543554413319","msgtype":"send_gifts","gifts":[{"gid":"14481197074000741072","giver_user_ids":["ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c=",-4],"receiver_user_ids":[],"created_at_client":1448119707,"created_at_server":0,"currency":"usd","direction":"giver","description":"laptop2"}],"users":[{"user_id":-4,"uid":"117126429320850988781","provider":"google_oauth2","user_name":"Jan Mobilos Roslind","api_profile_picture_url":"https://lh4.googleusercontent.com/-OaSW5VjFv4k/AAAAAAAAAAI/AAAAAAAAAB4/r6YxZoPJsSg/photo.jpg?sz=100"}],"servers":[{"server_id":0,"sha256":"c7RMen6sdUjB1rmBdtZIpqQyvzJuV9+sNDceb3Ae7d0="}]}],"done":[{"msgtype":"users_sha256","mid":"14484665303579595932","users":[{"user_id":"ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c=","sha256":"√≠(¬î√íWQ\r√òr\u0005¬à¬™i`\u0000√Ç%=\u0017¬É√ä{-√è√çn√≠\u001d¬µ√ÄY"},{"user_id":"1ZvuCxcvwezm+pWyTqyMg/m5P0T7ql0qVNUwQpUcRKE=","sha256":"¬ë¬™√•√ë{√≤kS√ù'√Æ\u000f13uZ√æ|√ß¬ß\u0012MAz[¬Ü|√ø-¬ª¬ñ\u0013"}]},{"mid":"14484665453905913561","request_mid":"14484665263463456499","msgtype":"gifts_sha256","ignore_invalid_gifts":[],"users":["ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c="],"gifts":[{"gid":"14481197074000741072","sha256":"G1p¬°√ì¬§√î>?'N^*√Ü√èm¬ù¬ø√≥7¬è¬¶(¬Ö√Ω¬πF¬ï*¬ß√Ç√Å"}]}],"error":[]}
GiftService.receive_message_request_gifts: msg      = {"mid":"14484665496263596255","msgtype":"request_gifts","gifts":["14481197074000741072"],"request_mid":"14484665453905913561","mutual_friends":[2]}
GiftService.validate_request_gifts_message: validating request_gifts message after received
GiftService.invalid_gift: new_users_index = {}
GiftService.receive_message_request_gifts: request_gifts        = 14481197074000741072
GiftService.receive_message_request_gifts: ok_gids                 = 14481197074000741072
GiftService.receive_message_request_gifts: send_gifts_sub_message  = {"mid":"14484665574385686320","msgtype":"send_gifts","gifts":[{"gid":"14481197074000741072","giver_user_ids":[2,4],"receiver_user_ids":[],"created_at_client":1448119707,"created_at_server":0,"currency":"usd","direction":"giver","description":"laptop2"}],"users":[]}
GiftService.receive_message_request_gifts: send_gifts_users = [2,4]
GiftService.sync_gifts_translate_user_ids: sync_gifts_message (1) = {"mid":"14484665574403488044","request_mid":"14484665496263596255","msgtype":"sync_gifts","mutual_friends":[2],"send_gifts":{"mid":"14484665574385686320","msgtype":"send_gifts","gifts":[{"gid":"14481197074000741072","giver_user_ids":[2,4],"receiver_user_ids":[],"created_at_client":1448119707,"created_at_server":0,"currency":"usd","direction":"giver","description":"laptop2"}],"users":[{"user_id":4,"uid":"117126429320850988781","provider":"google_oauth2","user_name":"Jan Mobilos Roslind","api_profile_picture_url":"https://lh4.googleusercontent.com/-OaSW5VjFv4k/AAAAAAAAAAI/AAAAAAAAAB4/r6YxZoPJsSg/photo.jpg?sz=100"}]}}
UserService.user_ids_to_remote_sha256: mutual_friends = [2], typeof user_ids = object
UserService.user_ids_to_remote_sha256: gift.giver_user_ids = [2,4], typeof user_ids = object
UserService.user_ids_to_remote_sha256: Warning for gift.giver_user_ids array. User id 4 do not have a remote sha256 signature. Using negative user_id -4 in sync_gifts message
UserService.user_ids_to_remote_sha256: gift.receiver_user_ids = [], typeof user_ids = object
UserService.user_ids_to_remote_sha256: send_gifts.users = [4], typeof user_ids = object
UserService.user_ids_to_remote_sha256: Warning for send_gifts.users array. User id 4 do not have a remote sha256 signature. Using negative user_id -4 in sync_gifts message
GiftService.sync_gifts_translate_user_ids: sync_gifts_message (2) = {"mid":"14484665574403488044","request_mid":"14484665496263596255","msgtype":"sync_gifts","mutual_friends":["ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c="],"send_gifts":{"mid":"14484665574385686320","msgtype":"send_gifts","gifts":[{"gid":"14481197074000741072","giver_user_ids":["ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c=",-4],"receiver_user_ids":[],"created_at_client":1448119707,"created_at_server":0,"currency":"usd","direction":"giver","description":"laptop2"}],"users":[{"user_id":-4,"uid":"117126429320850988781","provider":"google_oauth2","user_name":"Jan Mobilos Roslind","api_profile_picture_url":"https://lh4.googleusercontent.com/-OaSW5VjFv4k/AAAAAAAAAAI/AAAAAAAAAB4/r6YxZoPJsSg/photo.jpg?sz=100"}]}}
GiftService.sync_gifts_translate_user_ids: sync_gifts_message (3) = {"mid":"14484665574403488044","request_mid":"14484665496263596255","msgtype":"sync_gifts","mutual_friends":["ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c="],"send_gifts":{"mid":"14484665574385686320","msgtype":"send_gifts","gifts":[{"gid":"14481197074000741072","giver_user_ids":["ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c=",-4],"receiver_user_ids":[],"created_at_client":1448119707,"created_at_server":0,"currency":"usd","direction":"giver","description":"laptop2"}],"users":[{"user_id":-4,"uid":"117126429320850988781","provider":"google_oauth2","user_name":"Jan Mobilos Roslind","api_profile_picture_url":"https://lh4.googleusercontent.com/-OaSW5VjFv4k/AAAAAAAAAAI/AAAAAAAAAB4/r6YxZoPJsSg/photo.jpg?sz=100"}],"servers":[{"server_id":0,"sha256":"c7RMen6sdUjB1rmBdtZIpqQyvzJuV9+sNDceb3Ae7d0="}]}}
GiftService.validate_send_gifts_message: validating send_gifts message before send
UserService.user_ids_to_remote_sha256: mutual_friends = [2,3], typeof user_ids = object
GiftService.validate_send_gifts_message: mutual_friends = ["ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c=","1ZvuCxcvwezm+pWyTqyMg/m5P0T7ql0qVNUwQpUcRKE="]
GiftService.validate_send_gifts_message: send_gifts_received_user_ids  = -4
GiftService.validate_send_gifts_message: send_gifts_expected_user_ids  = -4
GiftService.validate_send_gifts_message: send_gift_missing_user_ids    =
GiftService.validate_send_gifts_message: send_gift_unexpected_user_ids =
GiftService.send_messages: msg = {"mid":"14484665574403488044","request_mid":"14484665496263596255","msgtype":"sync_gifts","mutual_friends":["ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c="],"send_gifts":{"mid":"14484665574385686320","msgtype":"send_gifts","gifts":[{"gid":"14481197074000741072","giver_user_ids":["ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c=",-4],"receiver_user_ids":[],"created_at_client":1448119707,"created_at_server":0,"currency":"usd","direction":"giver","description":"laptop2"}],"users":[{"user_id":-4,"uid":"117126429320850988781","provider":"google_oauth2","user_name":"Jan Mobilos Roslind","api_profile_picture_url":"https://lh4.googleusercontent.com/-OaSW5VjFv4k/AAAAAAAAAAI/AAAAAAAAAB4/r6YxZoPJsSg/photo.jpg?sz=100"}],"servers":[{"server_id":0,"sha256":"c7RMen6sdUjB1rmBdtZIpqQyvzJuV9+sNDceb3Ae7d0="}]}}
GiftService.send_messages: unencrypted message = {"sent_at_client":1448466560248,"messages":[{"mid":"14484665574403488044","request_mid":"14484665496263596255","msgtype":"sync_gifts","mutual_friends":["ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c="],"send_gifts":{"mid":"14484665574385686320","msgtype":"send_gifts","gifts":[{"gid":"14481197074000741072","giver_user_ids":["ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c=",-4],"receiver_user_ids":[],"created_at_client":1448119707,"created_at_server":0,"currency":"usd","direction":"giver","description":"laptop2"}],"users":[{"user_id":-4,"uid":"117126429320850988781","provider":"google_oauth2","user_name":"Jan Mobilos Roslind","api_profile_picture_url":"https://lh4.googleusercontent.com/-OaSW5VjFv4k/AAAAAAAAAAI/AAAAAAAAAB4/r6YxZoPJsSg/photo.jpg?sz=100"}],"servers":[{"server_id":0,"sha256":"c7RMen6sdUjB1rmBdtZIpqQyvzJuV9+sNDceb3Ae7d0="}]}}]}
GiftService.send_messages: message_with_envelope = {"receiver_did":"14481194806251567148","receiver_sha256":"3Rf35epojarDFzMj6laxbNhhxqyzznBcBsjJQE8BmSI=","server":false,"encryption":"sym","message":"U2FsdGVkX18IRm8KyqVPINMkrVYwwTNeUiTfyZU7r19MX2iy5Crtve9eme7pEsf3EdyBP+QILuBhlSR8iC3vMkud6k2+8JY5sbZnk6Otz/l+wPs0AGPbvhFqr//kmzGvwCytjXPP8dWdj6EJDnej/BOyyPvEYESBJD5YjdU0mtc/z0LbYI2lvRtArGM/Lq0yjoImyKAeqPd494h2fG6TtDEdlFvKv/fPcSTeHUeUd/fOnsadxL2g8WIUhw3x4sgx3rc/k8D+GgIXHsK72EqbzqJmUff/Cl/uysNBIxweMKKsuWzWTdIxqwaBSZJnoBFfSzfORvdiUd6TWVOAcXGBa9meEy4yD2XKobJd6rneYfUIOdiiThFzpEvwxKLg4pvGpcGU+gB+Usfi8Gp5Uv66PRBiBJ2KtSxxh8O7xUF61xm+itnc0Rajr3iUxWepYkzwrHVUD2LAydv0f9q5YPxWtvXzmKDDOG+gz6HDNa3H92aNV0kEpZHamhq6FzLXgq/5eZ1Olc2l+bxBroKlaXd2uqr9aMW57J1nrU2LKzO+kkk6kTIody1AAjyrXNW5QHZJCI0UuqDXuufC5+uZZcJ17CvmpEuswyFmMcXSAM2ckPRYZhDMKijuRvxFNLjJGO9iGpEttpJtRepS7gOdsHe6YXHwjxixqLZnGZnPeVNk5A9KflCCPmjtrZmSRgpWZIIJHo33qya8fKlaOLc1odwxOehPBHEofxMTHokHGb/qk12lWzaNHtjHAHPQBTuS4KN4jkEQpCl2O/YEncahQ5pGytiDW6QBb1j/jF267ZFPYKiAKAJImCpIsMLx7rz1dUhXgNzJD+xXWN1CHlaslFHec/zA05EG8Njn6lkW9/BhHcVbetKLHQ7NNdQGFM/jjYIY1f01P+ZFQxYODUfRFtJjLytxntxXrGMrjQ4dGptfUuc3aCx3NoKEYT8MegORbrhOBy4SIkZ5dAQ0344igPwPk/Xy6HMZZY+B11Jz08UJUE8eYImC4DBSNOKYlz2R81FT74DJKJcPTr8xaEaRzVFwWHmGkcVe8RnaHwfc7PnygdcqY7JMOTZ7ePXy9K4/NW4HEeaXZE0kfQCzSE1/vZm1ctEQbyTfrOqjOEVltEvT76P0mUxd4bmOl0fVcCpGlxz4"}


b) test that gift 14481197074000741072 is valid on laptop

client 1:

TextService loaded
NotiService loaded
UserService loaded
UserService.init_friends: friends = [{"user_id":2,"uid":"1705481075","provider":"facebook","user_name":"Jan Roslind","friend":1,"api_profile_picture_url":"https://fbcdn-profile-a.akamaihd.net/hprofile-ak-xaf1/v/t1.0-1/c0.0.100.100‚Ä¶e69911beba&oe=56EE73C0&__gda__=1457651594_08d4411bec425bcc33a29ca920f1da82","sha256":"1ZvuCxcvwezm+pWyTqyMg/m5P0T7ql0qVNUwQpUcRKE=","remote_sha256":{"1":"P4ZEqEHSYL/CCThSP5inVCDbNZYRiRCLtAy/84ZksBA="}},{"user_id":3,"uid":"1563545817212684","provider":"facebook","user_name":"Jan Mobilos Roslind","friend":2,"api_profile_picture_url":"https://fbcdn-profile-a.akamaihd.net/hprofile-ak-prn2/v/t1.0-1/c17.0.100.10‚Ä¶f5d8b9d28b&oe=56AD78F9&__gda__=1457908312_6770c57900abaa6ef8c56577b4bc2f6f","sha256":"ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c=","remote_sha256":{"1":"URutwCLSHDcK/IOpBOSvwEEwO65TDITv9QGyRAQLzbo="}}]
UserService.load_users: users = [{"user_id":2,"uid":"1705481075","provider":"facebook","user_name":"Jan Roslind","api_profile_picture_url":"https://fbcdn-profile-a.akamaihd.net/hprofile-ak-xaf1/v/t1.0-1/c0.0.100.100‚Ä¶e69911beba&oe=56EE73C0&__gda__=1457651594_08d4411bec425bcc33a29ca920f1da82","verified_at":1448119697},{"user_id":3,"uid":"1563545817212684","provider":"facebook","user_name":"Jan Mobilos Roslind","api_profile_picture_url":"https://fbcdn-profile-a.akamaihd.net/hprofile-ak-prn2/v/t1.0-1/c17.0.100.10‚Ä¶f5d8b9d28b&oe=56AD78F9&__gda__=1457908312_6770c57900abaa6ef8c56577b4bc2f6f"},{"user_id":-4,"uid":"117126429320850988781","provider":"google_oauth2","user_name":"Jan Mobilos Roslind","api_profile_picture_url":"https://lh4.googleusercontent.com/-OaSW5VjFv4k/AAAAAAAAAAI/AAAAAAAAAB4/r6YxZoPJsSg/photo.jpg?sz=100"}]
GiftService loaded
GiftService.invalid_gift: new_users_index = {}
GiftService.gift_sha256_for_client: gid = 14481197074000741072, in_gifts = true, comments_str = 0, sha256 = G1p¬°√ì¬§√î>?'N^*√Ü√èm¬ù¬ø√≥7¬è¬¶(¬Ö√Ω¬πF¬ï*¬ß√Ç√Å, sha256_gift = r√¶¬ã¬¥¬∏√Ä√í√Ø¬Ωf√ï¬∑√ë
¬ü/¬æ¬¨E√Æ√éf4¬ÅsF1lG>c, sha256_comments = _√¨√´f√ø√ào8√ôRxlmily√Ç√õ√Ç9√ùN¬ë¬¥g)√ó:'√ªW√©
GiftService.load_gifts: gift = {"gid":"14481197074000741072","direction":"giver","giver_user_ids":[3,-4],"receiver_user_ids":[],"created_at_client":1448119707,"created_at_server":1,"currency":"usd","description":"laptop2","show":true,"comments":[],"sha256":"G1p¬°√ì¬§√î>?'N^*√Ü√èm¬ù¬ø√≥7¬è¬¶(¬Ö√Ω¬πF¬ï*¬ß√Ç√Å","sha256_gift":"r√¶¬ã¬¥¬∏√Ä√í√Ø¬Ωf√ï¬∑\u001c√ë\r¬ü/¬æ¬¨E√Æ√éf4¬ÅsF1lG>c","sha256_comments":"_√¨√´f√ø√ào8√ôRxlmily√Ç√õ√Ç9√ùN¬ë¬¥g)√ó:'√ªW√©"}
GiftService.invalid_gift: new_users_index = {}
GiftService.gift_sha256_for_client: gid = 14481196979194894893, in_gifts = true, comments_str = 0, sha256 = √∞K`√∂√ê¬ôg√¢¬âf¬∏¬ø, Z¬©√∏	+√µ√†RQ√û¬π√™,Z, sha256_gift = √ß¬õ¬æ¬è¬à7√§¬≠¬ù√•S¬â¬æ}√ö√Ö0G-Oa¬£j√É¬Ω+¬ªG, sha256_comments = _√¨√´f√ø√ào8√ôRxlmily√Ç√õ√Ç9√ùN¬ë¬¥g)√ó:'√ªW√©
GiftService.load_gifts: gift = {"gid":"14481196979194894893","giver_user_ids":[2],"receiver_user_ids":[],"created_at_client":1448119697,"currency":"usd","direction":"giver","description":"laptop","show":true,"comments":[],"created_at_server":0,"sha256":"√∞K`√∂√ê¬ôg√¢¬âf¬∏¬ø, Z¬©√∏\t+√µ\u001a√†\u0012RQ\u0018\b√û¬π√™,Z","sha256_gift":"√ß¬õ¬æ¬è¬à7√§¬≠¬ù\u001b√•S\u0015¬â¬æ}\u0016√ö√Ö0G\u0015-Oa¬£j√É¬Ω+¬ªG","sha256_comments":"_√¨√´f√ø√ào8√ôRxlmily√Ç√õ√Ç9√ùN¬ë¬¥g)√ó:'√ªW√©"}
GiftService.load_gifts: gifts.length = 2

GiftService.add_friends_to_users: Error. Ignoring invalid user id -4 in copy friends to users operation

NavCtrl loaded
NavCtrl.start ping process. start up ping interval = 2000
Synchronous XMLHttpRequest on the main thread is deprecated because of its detrimental effects to the end user's experience. For more help, check http://xhr.spec.whatwg.org/.
GiftsCtrl loaded
NavCtrl.do_tasks: start
GiftService.update_mailboxes: New online mailbox {"did":"14481195855569775932","sha256":"4TN85EzCM62tcmd0Z5WGrclA75bYLneI2ayfgeq4uoA=","mutual_friends":[2,3],"server_id":1,"key":"144811958555697759324TN85EzCM62tcmd0Z5WGrclA75bYLneI2ayfgeq4uoA=","online":true,"inbox":[],"read":[],"outbox":[],"sending":[],"sent":[],"done":[],"error":[]} with mutual friends 2, 3. Added message = {"mid":"14484676323779482932","msgtype":"users_sha256","users":[2,3]} to outbox
GiftService.pubkeys_request: request = ["14481195855569775932"]
GiftService.send_messages: Wait. Public key has not yet been received for device 14481195855569775932
GiftService.pubkeys_response: pubkeys = [{"did":"14481195855569775932","pubkey":"-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAqdpgwEmNxbmNkSauONjp\n2gpcT4qJooPUD4VsgkdtyGrf6sXphLLtRl3xAVWxVDc32FykliPtsPO6VR4z0I4Z\nrFqpUuH15ZjgTs/ybfHB+dwVXeF+WQsAioFXSxCJIsEAV1tqMJsLFmBw+iVEedsh\nLjiJiSmrdzCVGGBoE8BwWXvymYqOBF1x3fAJbb1n39+IuFksqqSowKW7KsFt4raT\n549F9sS0NuqEySu1MGvUvyPJV14j6JVZsxtNFgOOyy4RzQjSjGyM+8Mai3KcKm0b\n3DEQyUZrrZSHwkapOYY431zV1ynG3oddxf0vLCwcIjZzBuqn9St1jm3YHG3GXvjW\neQIDAQAB\n-----END PUBLIC KEY-----"}]
GiftService.send_messages: symmetric password setup: generated password1
GiftService.send_messages: symmetric password setup: sending rsa message
GiftService.receive_messages: message_with_envelope = {"sender_did":"14481195855569775932","server":false,"encryption":"rsa","message":"EY697j+zlty4x3lTMIf5ehdnJoIc/2lfu7uMco3zZOKl7ZnxD+bJbop2jx/+NoL3l/6aASiipSdSkcSolRDKfSb/1ApVg4/tisin3LcKHzmavY5kTnch+LnDz/BOmM6Atsn8IVoEViXuOlVSde2ZrO54EkyNHRgeJkiEl4sibw5VRtN8UNRJTZEDvETMWfZEy6Zc8zaO7emi+e1NnE+heclvubJtN5l41+KQ8IC9W3nDvvCvfSyYd0CfUgqAPGh6z/KSx7P6JZIMoJxrpRjS9mzgMOrnDZ73TSJCRvohzPn36Ihy6cnWS7LP8N9hovDSUZlp4xunqLn/5dAi+qKybw==","receiver_did":"14481194806251567148","sender_sha256":"4TN85EzCM62tcmd0Z5WGrclA75bYLneI2ayfgeq4uoA="}
GiftService.setup_device_password: device.password = +KGo-xzCZ u;iE_lF.%l5q[ (O¬£vNLG./6(Rq(rSa&1A[_(PR1%Bt[N=1+EM_{!]e $q/_g]yp+;CsG6
GiftService.receive_message_password: device.password = +KGo-xzCZ u;iE_lF.%l5q[ (O¬£vNLG./6(Rq(rSa&1A[_(PR1%Bt[N=1+EM_{!]e $q/_g]yp+;CsG6
GiftService.receive_message_password: symmetric password setup completed.
GiftService.receive_message_password: done = 0, md5_ok = true
GiftService.receive_messages: device.password = +KGo-xzCZ u;iE_lF.%l5q[ (O¬£vNLG./6(Rq(rSa&1A[_(PR1%Bt[N=1+EM_{!]e $q/_g]yp+;CsG6
GiftService.send_messages: msg = {"mid":"14484676323779482932","msgtype":"users_sha256","users":[2,3]}
UserService.user_ids_to_remote_sha256: mutual_friends = [2,3], typeof user_ids = object
GiftService.send_message_users_sha256: users_sha256_message = {"msgtype":"users_sha256","mid":"14484676323779482932","users":[{"user_id":"P4ZEqEHSYL/CCThSP5inVCDbNZYRiRCLtAy/84ZksBA=","sha256":"¬ë¬™√•√ë{√≤kS√ù'√Æ\u000f13uZ√æ|√ß¬ß\u0012MAz[¬Ü|√ø-¬ª¬ñ\u0013"},{"user_id":"URutwCLSHDcK/IOpBOSvwEEwO65TDITv9QGyRAQLzbo=","sha256":"√≠(¬î√íWQ\r√òr\u0005¬à¬™i`\u0000√Ç%=\u0017¬É√ä{-√è√çn√≠\u001d¬µ√ÄY"}]}
GiftService.send_messages: unencrypted message = {"sent_at_client":1448467644994,"messages":[{"msgtype":"users_sha256","mid":"14484676323779482932","users":[{"user_id":"P4ZEqEHSYL/CCThSP5inVCDbNZYRiRCLtAy/84ZksBA=","sha256":"¬ë¬™√•√ë{√≤kS√ù'√Æ\u000f13uZ√æ|√ß¬ß\u0012MAz[¬Ü|√ø-¬ª¬ñ\u0013"},{"user_id":"URutwCLSHDcK/IOpBOSvwEEwO65TDITv9QGyRAQLzbo=","sha256":"√≠(¬î√íWQ\r√òr\u0005¬à¬™i`\u0000√Ç%=\u0017¬É√ä{-√è√çn√≠\u001d¬µ√ÄY"}]}]}
GiftService.send_messages: message_with_envelope = {"receiver_did":"14481195855569775932","receiver_sha256":"4TN85EzCM62tcmd0Z5WGrclA75bYLneI2ayfgeq4uoA=","server":false,"encryption":"sym","message":"U2FsdGVkX18Ur6/t4R6ZG76RaN9KUlF5mD699g1Rm+ZvpPvXBL5oiLvHE5mBQqGm/pX8sbXG51TAcaachQu6YDgyOkZMBaWqU0KXyLT2W+6nG5N+Hbz38CAWPEA0I21CThfM4oYozBBhdrsP0Hb9i+ZqtzjzGWf1Li0KbrRhA8iMP/jQMOOAGAFPvCydHWxMMJ0Jw0PYgr9gqpHSVkzvp1WufixxI4/ni+gfA5mOdms1r+4OsHUsOGMry+lshQTVgtYa5t0bGwBURMJvNE1xVafQ3akkwOGnPnoFa2bNP+H/Wjq46/nPVa2a0HJ5fdxjg9RWV5KMn5SZK2wFIaJh7SeQKGlFvCkYGpjAURqku+BnqnoQzgddKtzOKKrPZHzFUAdtP4WoWyMi7TGXrlRkiwrc+poSG4H9AdXNNh9eLsOx2lSYFsgYxW6SRU7Epadfsq65bFP31/X3DchMJHMlrBdiukdDyc+0VODAMnXXrkeuOMacE3yRFTRmqhnVaCAThZK7tfvYGNnBCYB7VNfCfg=="}
GiftService.receive_messages: message_with_envelope = {"sender_did":"14481195855569775932","server":false,"encryption":"rsa","message":"IwPQhlE60ENSm5BwSw7HjRjejNQ2WYXWdJ3uqvs8BxeP+fFlqSJHTyzu+Bbj54fPYMnEVe11irwySIciTpGc1ngFxHvfauyK9PP9X/SGB1MXmeKZKhldM77iq6R4F1KjjSjPJTLUtVB/RpgzeRa1eD0IpiHeg/z+HYjqzySTMJCXowta3vX0UQNKK0M03Nttc4snPCad3JnxzYN0bPDU2SysQnI8SR3rzpHRKtxOmIDanU94jq+uOOYD4LFVjfS+GOO/nCN0EcsSlIiT+8BP5NL+rtDwUXKyZU4mCn0b/6QYP7MAOEyddwjDAsqQ3ALd5xgCbHeVq5NvcA9yr0r1Bw==","receiver_did":"14481194806251567148","sender_sha256":"4TN85EzCM62tcmd0Z5WGrclA75bYLneI2ayfgeq4uoA="}
GiftService.setup_device_password: device.password = +KGo-xzCZ u;iE_lF.%l5q[ (O¬£vNLG./6(Rq(rSa&1A[_(PR1%Bt[N=1+EM_{!]e $q/_g]yp+;CsG6
GiftService.receive_message_password: device.password = +KGo-xzCZ u;iE_lF.%l5q[ (O¬£vNLG./6(Rq(rSa&1A[_(PR1%Bt[N=1+EM_{!]e $q/_g]yp+;CsG6
GiftService.receive_message_password: symmetric password setup completed.
GiftService.receive_message_password: done = 0, md5_ok = true
GiftService.receive_messages: device.password = +KGo-xzCZ u;iE_lF.%l5q[ (O¬£vNLG./6(Rq(rSa&1A[_(PR1%Bt[N=1+EM_{!]e $q/_g]yp+;CsG6
GiftService.receive_messages: message_with_envelope = {"sender_did":"14481195855569775932","server":false,"encryption":"rsa","message":"bFVlnz/V6VYs+KoguAaItBe+GPkp+fTZoPPXP42Lba5/9pfO/GlkcWxNxsKA2lt9up/7K4gIrqQo05PEyHPCOEHdcjb/UI7RhleLsXAEmTH+MK57wkWRrfMmYvtK8C6yFs1t4sQp1cw1tii3OYUbD1a781bH2NL2U7JsQIb+AIuxETyPhKe0TE2lnXSpK2dEWnXwoKjM4YW8btFtkBDyEXIFn23ld33ZZRK9JO3E/StyI6dknJYs296Wl8dDMeUwZsnbb3At49GBcq4Ab8vuAwtxZ46ya4S8bgZSJktNZdHPsQjDU3woDlhiw7UiBh/k1kT/YtqB7R6yjsPgrG7Aow==","receiver_did":"14481194806251567148","sender_sha256":"4TN85EzCM62tcmd0Z5WGrclA75bYLneI2ayfgeq4uoA="}
GiftService.setup_device_password: device.password = +KGo-xzCZ u;iE_lF.%l5q[ (O¬£vNLG./6(Rq(rSa&1A[_(PR1%Bt[N=1+EM_{!]e $q/_g]yp+;CsG6
GiftService.receive_message_password: device.password = +KGo-xzCZ u;iE_lF.%l5q[ (O¬£vNLG./6(Rq(rSa&1A[_(PR1%Bt[N=1+EM_{!]e $q/_g]yp+;CsG6
GiftService.receive_message_password: symmetric password setup completed.
GiftService.receive_message_password: done = 0, md5_ok = true
GiftService.receive_messages: device.password = +KGo-xzCZ u;iE_lF.%l5q[ (O¬£vNLG./6(Rq(rSa&1A[_(PR1%Bt[N=1+EM_{!]e $q/_g]yp+;CsG6
GiftService.receive_messages: message_with_envelope = {"sender_did":"14481195855569775932","server":false,"encryption":"rsa","message":"Lf44SGslH20A+C7BTojwfywqHerC0x2vn+TK9tu3dO1fXzQQ6IT3710nUJz1O1cNw6lrc3QmdvIrUCJUcKmIXwXiwrniQB6Hf5ob+JdUfCdwm47z/o+hqfcnl4boRGa+JMKXJe80z5LJXvdIbUmu2VfRaKz4l5JBGlWPPkjTyteVXtkGXTZHUStpLb4BuhxDiIErBFPjeQ79eKRN+hTpTjmYbhSaYMfKDu02UEE8D43IZ6X4ncljQungncRnexw+cMn/l9TJYfFRm1S/0p1JAsV0nHErkinVGotUaB3Z5cxUpDZNNPgo/NmB+xqy12q/anksed4VC1K8p/4rnZB01Q==","receiver_did":"14481194806251567148","sender_sha256":"4TN85EzCM62tcmd0Z5WGrclA75bYLneI2ayfgeq4uoA="}
GiftService.setup_device_password: device.password = +KGo-xzCZ u;iE_lF.%l5q[ (O¬£vNLG./6(Rq(rSa&1A[_(PR1%Bt[N=1+EM_{!]e $q/_g]yp+;CsG6
GiftService.receive_message_password: device.password = +KGo-xzCZ u;iE_lF.%l5q[ (O¬£vNLG./6(Rq(rSa&1A[_(PR1%Bt[N=1+EM_{!]e $q/_g]yp+;CsG6
GiftService.receive_message_password: symmetric password setup completed.
GiftService.receive_message_password: done = 0, md5_ok = true
GiftService.receive_messages: device.password = +KGo-xzCZ u;iE_lF.%l5q[ (O¬£vNLG./6(Rq(rSa&1A[_(PR1%Bt[N=1+EM_{!]e $q/_g]yp+;CsG6
GiftService.receive_message_users_sha256: mailbox = {"did":"14481195855569775932","sha256":"4TN85EzCM62tcmd0Z5WGrclA75bYLneI2ayfgeq4uoA=","mutual_friends":[2,3],"server_id":1,"key":"144811958555697759324TN85EzCM62tcmd0Z5WGrclA75bYLneI2ayfgeq4uoA=","online":true,"inbox":[],"read":[],"outbox":[],"sending":[],"sent":[{"msgtype":"users_sha256","mid":"14484676323779482932","users":[{"user_id":"P4ZEqEHSYL/CCThSP5inVCDbNZYRiRCLtAy/84ZksBA=","sha256":"¬ë¬™√•√ë{√≤kS√ù'√Æ\u000f13uZ√æ|√ß¬ß\u0012MAz[¬Ü|√ø-¬ª¬ñ\u0013"},{"user_id":"URutwCLSHDcK/IOpBOSvwEEwO65TDITv9QGyRAQLzbo=","sha256":"√≠(¬î√íWQ\r√òr\u0005¬à¬™i`\u0000√Ç%=\u0017¬É√ä{-√è√çn√≠\u001d¬µ√ÄY"}]}],"done":[],"error":[]}
GiftService.receive_message_users_sha256: msg     = {"msgtype":"users_sha256","mid":"14484676354400642726","users":[{"user_id":"ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c=","sha256":"√≠(¬î√íWQ\r√òr\u0005¬à¬™i`\u0000√Ç%=\u0017¬É√ä{-√è√çn√≠\u001d¬µ√ÄY"},{"user_id":"1ZvuCxcvwezm+pWyTqyMg/m5P0T7ql0qVNUwQpUcRKE=","sha256":"¬ë¬™√•√ë{√≤kS√ù'√Æ\u000f13uZ√æ|√ß¬ß\u0012MAz[¬Ü|√ø-¬ª¬ñ\u0013"}]}
GiftService.receive_message_users_sha256: users_sha256 message from client on an other Gofreerev server. Translate sha256 signatures in msg.users to internal user ids
GiftService.receive_message_users_sha256: msg.users (1) = [{"user_id":"ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c=","sha256":"√≠(¬î√íWQ\r√òr\u0005¬à¬™i`\u0000√Ç%=\u0017¬É√ä{-√è√çn√≠\u001d¬µ√ÄY"},{"user_id":"1ZvuCxcvwezm+pWyTqyMg/m5P0T7ql0qVNUwQpUcRKE=","sha256":"¬ë¬™√•√ë{√≤kS√ù'√Æ\u000f13uZ√æ|√ß¬ß\u0012MAz[¬Ü|√ø-¬ª¬ñ\u0013"}]
GiftService.receive_message_users_sha256: translating sha256 user_id 1ZvuCxcvwezm+pWyTqyMg/m5P0T7ql0qVNUwQpUcRKE= to internal user_id 2
GiftService.receive_message_users_sha256: translating sha256 user_id ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c= to internal user_id 3
GiftService.receive_message_users_sha256: msg.users (2) = [{"user_id":3,"sha256":"√≠(¬î√íWQ\r√òr\u0005¬à¬™i`\u0000√Ç%=\u0017¬É√ä{-√è√çn√≠\u001d¬µ√ÄY"},{"user_id":2,"sha256":"¬ë¬™√•√ë{√≤kS√ù'√Æ\u000f13uZ√æ|√ß¬ß\u0012MAz[¬Ü|√ø-¬ª¬ñ\u0013"}]
GiftService.receive_message_users_sha256: msg_users = [3,2], my_mutual_friends = [2,3], invalid_user_ids = []
GiftService.receive_message_users_sha256: sha256_hash = {"2":{"my_sha256":"¬ë¬™√•√ë{√≤kS√ù'√Æ\u000f13uZ√æ|√ß¬ß\u0012MAz[¬Ü|√ø-¬ª¬ñ\u0013","msg_sha256":"¬ë¬™√•√ë{√≤kS√ù'√Æ\u000f13uZ√æ|√ß¬ß\u0012MAz[¬Ü|√ø-¬ª¬ñ\u0013"},"3":{"my_sha256":"√≠(¬î√íWQ\r√òr\u0005¬à¬™i`\u0000√Ç%=\u0017¬É√ä{-√è√çn√≠\u001d¬µ√ÄY","msg_sha256":"√≠(¬î√íWQ\r√òr\u0005¬à¬™i`\u0000√Ç%=\u0017¬É√ä{-√è√çn√≠\u001d¬µ√ÄY"}}
GiftService.receive_message_users_sha256: mutual gifts for this device are up-to-date.

client 2:

TextService loaded
NotiService loaded
UserService loaded
UserService.init_friends: friends = [{"user_id":2,"uid":"1616942831872982","provider":"facebook","user_name":"Jan Mobilos Roslind","friend":1,"api_profile_picture_url":"https://fbcdn-profile-a.akamaihd.net/hprofile-ak-prn2/v/t1.0-1/c17.0.100.10‚Ä¶f5d8b9d28b&oe=56AD78F9&__gda__=1457908312_6770c57900abaa6ef8c56577b4bc2f6f","sha256":"URutwCLSHDcK/IOpBOSvwEEwO65TDITv9QGyRAQLzbo=","remote_sha256":{"1":"ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c="}},{"user_id":3,"uid":"4878645699741","provider":"facebook","user_name":"Jan Roslind","friend":2,"api_profile_picture_url":"https://fbcdn-profile-a.akamaihd.net/hprofile-ak-xaf1/v/t1.0-1/c0.0.100.100‚Ä¶e69911beba&oe=56EE73C0&__gda__=1457651594_08d4411bec425bcc33a29ca920f1da82","sha256":"P4ZEqEHSYL/CCThSP5inVCDbNZYRiRCLtAy/84ZksBA=","remote_sha256":{"1":"1ZvuCxcvwezm+pWyTqyMg/m5P0T7ql0qVNUwQpUcRKE="}},{"user_id":4,"uid":"117126429320850988781","provider":"google_oauth2","user_name":"Jan Mobilos Roslind","friend":1,"api_profile_picture_url":"https://lh4.googleusercontent.com/-OaSW5VjFv4k/AAAAAAAAAAI/AAAAAAAAAB4/r6YxZoPJsSg/photo.jpg?sz=100"},{"user_id":5,"uid":"113703200528116224701","provider":"google_oauth2","user_name":"Anitta limkilde-kj√¶r","friend":3,"api_profile_picture_url":"https://lh4.googleusercontent.com/-vgZD_bBbcCU/AAAAAAAAAAI/AAAAAAAAACI/s73HGTddRr8/photo.jpg?sz=50"},{"user_id":6,"uid":"102648158892233211696","provider":"google_oauth2","user_name":"Annastasia Damgaard Jespersen","friend":3,"api_profile_picture_url":"https://lh6.googleusercontent.com/-ntpPasQhI3c/AAAAAAAAAAI/AAAAAAAAAB4/c7uummmJgj0/photo.jpg?sz=50"},{"user_id":7,"uid":"111686936238581783326","provider":"google_oauth2","user_name":"Dream Coach","friend":3,"api_profile_picture_url":"https://lh3.googleusercontent.com/-hUqqNQvn424/AAAAAAAAAAI/AAAAAAAAAes/7t3lUe9SfXU/photo.jpg?sz=50"},{"user_id":8,"uid":"117657151428689087350","provider":"google_oauth2","user_name":"Jan Roslind","friend":3,"api_profile_picture_url":"https://lh5.googleusercontent.com/-58Ne1gy6H2Y/AAAAAAAAAAI/AAAAAAAAAIc/tc2IBIr9yjY/photo.jpg?sz=50"}]
UserService.load_users: users = [{"user_id":2,"uid":"1616942831872982","provider":"facebook","user_name":"Jan Mobilos Roslind","api_profile_picture_url":"https://fbcdn-profile-a.akamaihd.net/hprofile-ak-prn2/v/t1.0-1/c17.0.100.10‚Ä¶f5d8b9d28b&oe=56AD78F9&__gda__=1457908312_6770c57900abaa6ef8c56577b4bc2f6f","verified_at":1448119707},{"user_id":4,"uid":"117126429320850988781","provider":"google_oauth2","user_name":"Jan Mobilos Roslind","api_profile_picture_url":"https://lh4.googleusercontent.com/-OaSW5VjFv4k/AAAAAAAAAAI/AAAAAAAAAB4/r6YxZoPJsSg/photo.jpg?sz=100","verified_at":1448119707},{"user_id":3,"uid":"4878645699741","provider":"facebook","user_name":"Jan Roslind","api_profile_picture_url":"https://fbcdn-profile-a.akamaihd.net/hprofile-ak-xaf1/v/t1.0-1/c0.0.100.100‚Ä¶e69911beba&oe=56EE73C0&__gda__=1457651594_08d4411bec425bcc33a29ca920f1da82"}]
GiftService loaded
GiftService.invalid_gift: new_users_index = {}
GiftService.gift_sha256_for_client: gid = 14481196979194894893, in_gifts = true, comments_str = 0, sha256 = √∞K`√∂√ê¬ôg√¢¬âf¬∏¬ø, Z¬©√∏	+√µ√†RQ√û¬π√™,Z, sha256_gift = √ß¬õ¬æ¬è¬à7√§¬≠¬ù√•S¬â¬æ}√ö√Ö0G-Oa¬£j√É¬Ω+¬ªG, sha256_comments = _√¨√´f√ø√ào8√ôRxlmily√Ç√õ√Ç9√ùN¬ë¬¥g)√ó:'√ªW√©
GiftService.load_gifts: gift = {"gid":"14481196979194894893","direction":"giver","giver_user_ids":[3],"receiver_user_ids":[],"created_at_client":1448119697,"created_at_server":1,"currency":"usd","description":"laptop","show":true,"comments":[],"sha256":"√∞K`√∂√ê¬ôg√¢¬âf¬∏¬ø, Z¬©√∏\t+√µ\u001a√†\u0012RQ\u0018\b√û¬π√™,Z","sha256_gift":"√ß¬õ¬æ¬è¬à7√§¬≠¬ù\u001b√•S\u0015¬â¬æ}\u0016√ö√Ö0G\u0015-Oa¬£j√É¬Ω+¬ªG","sha256_comments":"_√¨√´f√ø√ào8√ôRxlmily√Ç√õ√Ç9√ùN¬ë¬¥g)√ó:'√ªW√©"}
GiftService.invalid_gift: new_users_index = {}
GiftService.gift_sha256_for_client: gid = 14481197074000741072, in_gifts = true, comments_str = 0, sha256 = G1p¬°√ì¬§√î>?'N^*√Ü√èm¬ù¬ø√≥7¬è¬¶(¬Ö√Ω¬πF¬ï*¬ß√Ç√Å, sha256_gift = r√¶¬ã¬¥¬∏√Ä√í√Ø¬Ωf√ï¬∑√ë
¬ü/¬æ¬¨E√Æ√éf4¬ÅsF1lG>c, sha256_comments = _√¨√´f√ø√ào8√ôRxlmily√Ç√õ√Ç9√ùN¬ë¬¥g)√ó:'√ªW√©
GiftService.load_gifts: gift = {"gid":"14481197074000741072","giver_user_ids":[2,4],"receiver_user_ids":[],"created_at_client":1448119707,"currency":"usd","direction":"giver","description":"laptop2","show":true,"comments":[],"created_at_server":0,"sha256":"G1p¬°√ì¬§√î>?'N^*√Ü√èm¬ù¬ø√≥7¬è¬¶(¬Ö√Ω¬πF¬ï*¬ß√Ç√Å","sha256_gift":"r√¶¬ã¬¥¬∏√Ä√í√Ø¬Ωf√ï¬∑\u001c√ë\r¬ü/¬æ¬¨E√Æ√éf4¬ÅsF1lG>c","sha256_comments":"_√¨√´f√ø√ào8√ôRxlmily√Ç√õ√Ç9√ùN¬ë¬¥g)√ó:'√ªW√©"}
GiftService.load_gifts: gifts.length = 2
NavCtrl loaded
NavCtrl.start ping process. start up ping interval = 2000
Synchronous XMLHttpRequest on the main thread is deprecated because of its detrimental effects to the end user's experience. For more help, check http://xhr.spec.whatwg.org/.
GiftsCtrl loaded
NavCtrl.do_tasks: start
GiftService.update_mailboxes: New online mailbox {"did":"14481194806251567148","sha256":"3Rf35epojarDFzMj6laxbNhhxqyzznBcBsjJQE8BmSI=","mutual_friends":[2,3],"server_id":1,"key":"144811948062515671483Rf35epojarDFzMj6laxbNhhxqyzznBcBsjJQE8BmSI=","online":true,"inbox":[],"read":[],"outbox":[],"sending":[],"sent":[],"done":[],"error":[]} with mutual friends 2, 3. Added message = {"mid":"14484676354400642726","msgtype":"users_sha256","users":[2,3]} to outbox
GiftService.pubkeys_request: request = ["14481194806251567148"]
GiftService.send_messages: Wait. Public key has not yet been received for device 14481194806251567148
GiftService.pubkeys_response: pubkeys = [{"did":"14481194806251567148","pubkey":"-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAsxTUNvxKmghmhLA9wHrm\nZSPW6r1YPh63vRG/LDegVhR9T1O/+HfO6qJ6ic31Fny4vtZhvD+K6NYq8laLOYcZ\nSAQMHjR8rQdn/ttasYyn/I0+7wcNtgFQMz0f7oj9RORputUN6RjGbytIaixrGZrf\nZGezXN31wjEahkeZzNnQ9kB9sFLJj3M5HhWyEgnAsKqKFZjjc0kAaeHH0lV6m6Vm\nAwa8VwS5w83rfLXKlZASmiPFXFCUGE8iOYPtHGia4IcMzCwma01895LSemprKodR\nIlSOrspZCcu7ekJH5DwpFiMRv7/b4awsLrpKyJ3WfJwPd9QWdD2e/dqH7CSMtMDp\n4QIDAQAB\n-----END PUBLIC KEY-----"}]
GiftService.receive_messages: message_with_envelope = {"sender_did":"14481194806251567148","server":false,"encryption":"rsa","message":"Jfzn3zzDcz1B38+7hLRyLrjQ3eYS+KYP6TWDyYB4gZ+YTvzZu6xJ/7B6edbMo8xgtorvKP7ZPWYZX9eJ1L8dxWiuLzArQPlBMK6XuvFMxxYYecyQ8mMm5IdWtM7/GIzfXua0H+CKRGlb1c/IqCuN0R1OVhISb1/zpIuIqVurq8N2HOSzaPsFsnAX89TsZNmHQKNRkci6FORMF3WGRc2WUzn2zdIAe/QxzYd/7n60etUJHb+0blVNysIc/q5q+lZTRBZ51+a5O9YQa2kO5So3hHV8xn0q4yAYWWqRqlJ+q1Wd7ukzrBiRR/HjIMRPHoOFdzgpfvTJiOr/S2zQD7+PrA==","receiver_did":"14481195855569775932","sender_sha256":"3Rf35epojarDFzMj6laxbNhhxqyzznBcBsjJQE8BmSI="}
GiftService.setup_device_password: symmetric password setup: generated password1
GiftService.setup_device_password: device.password = +KGo-xzCZ u;iE_lF.%l5q[ (O¬£vNLG./6(Rq(rSa&1A[_(PR1%Bt[N=1+EM_{!]e $q/_g]yp+;CsG6
GiftService.receive_message_password: device.password = +KGo-xzCZ u;iE_lF.%l5q[ (O¬£vNLG./6(Rq(rSa&1A[_(PR1%Bt[N=1+EM_{!]e $q/_g]yp+;CsG6
GiftService.receive_message_password: symmetric password setup in progress.
GiftService.receive_message_password: done = 0, md5_ok = false
GiftService.receive_messages: device.password = undefined
GiftService.setup_device_password: device.password = +KGo-xzCZ u;iE_lF.%l5q[ (O¬£vNLG./6(Rq(rSa&1A[_(PR1%Bt[N=1+EM_{!]e $q/_g]yp+;CsG6
GiftService.send_messages: symmetric password setup: sending rsa message
GiftService.receive_messages: message_with_envelope = {"sender_did":"14481194806251567148","server":false,"encryption":"rsa","message":"b5HCgOgx8/RUXZXR2PRk0P71aW0XM84lqBPYFG0AbsC5xTJST3hs0s/8tBdh5sWXBDBJZJ+4jocKGtaHTnyA2zTtOvUl8HSKdMGsNL9GckNFPPJoyKcHGTyLpCAX9A+QFJWkbJdNTi3XuBF+Q5Z8U6GczISA2tyu29OPeA0qjhkFA5IPTwZGQg2nFehiwp0Fg+Sxrj2lllAk9e1AZUwqrFLsgUICslToqrjmvOyFRBPriH1L7BfuwXCj0fQspdwD95gvQYPTwiN4aogBIAuWlLm0QZk0AzD5bjTkXZDGaYGdujwfG6sdcxTCXd154/+fLaN9PeR582A+H1oT3/wrew==","receiver_did":"14481195855569775932","sender_sha256":"3Rf35epojarDFzMj6laxbNhhxqyzznBcBsjJQE8BmSI="}
GiftService.setup_device_password: device.password = +KGo-xzCZ u;iE_lF.%l5q[ (O¬£vNLG./6(Rq(rSa&1A[_(PR1%Bt[N=1+EM_{!]e $q/_g]yp+;CsG6
GiftService.receive_message_password: device.password = +KGo-xzCZ u;iE_lF.%l5q[ (O¬£vNLG./6(Rq(rSa&1A[_(PR1%Bt[N=1+EM_{!]e $q/_g]yp+;CsG6
GiftService.receive_message_password: symmetric password setup in progress.
GiftService.receive_message_password: done = 0, md5_ok = false
GiftService.receive_messages: device.password = undefined
GiftService.setup_device_password: device.password = +KGo-xzCZ u;iE_lF.%l5q[ (O¬£vNLG./6(Rq(rSa&1A[_(PR1%Bt[N=1+EM_{!]e $q/_g]yp+;CsG6
GiftService.send_messages: symmetric password setup: sending rsa message
GiftService.receive_messages: message_with_envelope = {"sender_did":"14481194806251567148","server":false,"encryption":"rsa","message":"V5X3XkdlXzRwcnjy/w4sqihfsXc4Rd2W+JkUFFis6gTxlIgD23sL8HgnWwy5H031w7xgg5gThe/6QuwMw4I0klmjtCWIF69oCstGjwBTrQdED8cv6KzjwF3iOSzr5CFfsiVv2ujXc6MJvWdhHcfbydJTGnh/Bx8iAEWVa7WxH+BMRmWwa/XBMGAfIsxxv1L0QZ+1P+FnogZRpfOpKIIpHC65yiObnegJau+3U1tnCYIIDWCK6KxiOTVj2H1IpbZ3mewC+zirLNMn8bfV2AalYiAcz35GURnPXhhOn0oVJvqUF595kvLdmmQZW+BX1PTAliGn+KrfQKSzyKNxe/3Ssw==","receiver_did":"14481195855569775932","sender_sha256":"3Rf35epojarDFzMj6laxbNhhxqyzznBcBsjJQE8BmSI="}
GiftService.setup_device_password: device.password = +KGo-xzCZ u;iE_lF.%l5q[ (O¬£vNLG./6(Rq(rSa&1A[_(PR1%Bt[N=1+EM_{!]e $q/_g]yp+;CsG6
GiftService.receive_message_password: device.password = +KGo-xzCZ u;iE_lF.%l5q[ (O¬£vNLG./6(Rq(rSa&1A[_(PR1%Bt[N=1+EM_{!]e $q/_g]yp+;CsG6
GiftService.receive_message_password: symmetric password setup in progress.
GiftService.receive_message_password: done = 0, md5_ok = false
GiftService.receive_messages: device.password = undefined
GiftService.setup_device_password: device.password = +KGo-xzCZ u;iE_lF.%l5q[ (O¬£vNLG./6(Rq(rSa&1A[_(PR1%Bt[N=1+EM_{!]e $q/_g]yp+;CsG6
GiftService.send_messages: symmetric password setup: sending rsa message
GiftService.receive_messages: message_with_envelope = {"sender_did":"14481194806251567148","server":false,"encryption":"rsa","message":"cyDESAOBM7sEaPZFj0uLS698eawNF398q5I7GgGqNTMhdmNpIGpdSSYQDp22MKtzzT6/QN01PYNNtwKbxnIxc/5WkmkZ/AxJVEP4RE6M3C4AlWEPQW9t6PD9NpOOB0m9erpmTFAI1nVjRyouGEiIgCLq1N0Ar8O2R0d4zWi3TbsK7MWh6hJUHYUcDGqTuz1PwD/3Wesgpc/zNwlBZFUFALEoAcLRjeYoKkOCBd8ZmvPTieOC78o+aGxJpII82MNMEVPSNPvWWxcn9AZF1g9wIxgqmCe73OnpxohRRUfzFEtgjuQ+1rfgDqXH/BF+TPK3pvcj/6SPL1cvUw5OFf8fww==","receiver_did":"14481195855569775932","sender_sha256":"3Rf35epojarDFzMj6laxbNhhxqyzznBcBsjJQE8BmSI="}
GiftService.setup_device_password: device.password = +KGo-xzCZ u;iE_lF.%l5q[ (O¬£vNLG./6(Rq(rSa&1A[_(PR1%Bt[N=1+EM_{!]e $q/_g]yp+;CsG6
GiftService.receive_message_password: device.password = +KGo-xzCZ u;iE_lF.%l5q[ (O¬£vNLG./6(Rq(rSa&1A[_(PR1%Bt[N=1+EM_{!]e $q/_g]yp+;CsG6
GiftService.receive_message_password: symmetric password setup in progress.
GiftService.receive_message_password: done = 0, md5_ok = false
GiftService.receive_messages: device.password = undefined
GiftService.setup_device_password: device.password = +KGo-xzCZ u;iE_lF.%l5q[ (O¬£vNLG./6(Rq(rSa&1A[_(PR1%Bt[N=1+EM_{!]e $q/_g]yp+;CsG6
GiftService.send_messages: symmetric password setup: sending rsa message
GiftService.receive_message_users_sha256: mailbox = {"did":"14481194806251567148","sha256":"3Rf35epojarDFzMj6laxbNhhxqyzznBcBsjJQE8BmSI=","mutual_friends":[2,3],"server_id":1,"key":"144811948062515671483Rf35epojarDFzMj6laxbNhhxqyzznBcBsjJQE8BmSI=","online":true,"inbox":[],"read":[],"outbox":[{"mid":"14484676354400642726","msgtype":"users_sha256","users":[2,3]}],"sending":[],"sent":[],"done":[],"error":[]}
GiftService.receive_message_users_sha256: msg     = {"msgtype":"users_sha256","mid":"14484676323779482932","users":[{"user_id":"P4ZEqEHSYL/CCThSP5inVCDbNZYRiRCLtAy/84ZksBA=","sha256":"¬ë¬™√•√ë{√≤kS√ù'√Æ\u000f13uZ√æ|√ß¬ß\u0012MAz[¬Ü|√ø-¬ª¬ñ\u0013"},{"user_id":"URutwCLSHDcK/IOpBOSvwEEwO65TDITv9QGyRAQLzbo=","sha256":"√≠(¬î√íWQ\r√òr\u0005¬à¬™i`\u0000√Ç%=\u0017¬É√ä{-√è√çn√≠\u001d¬µ√ÄY"}]}
GiftService.receive_message_users_sha256: users_sha256 message from client on an other Gofreerev server. Translate sha256 signatures in msg.users to internal user ids
GiftService.receive_message_users_sha256: msg.users (1) = [{"user_id":"P4ZEqEHSYL/CCThSP5inVCDbNZYRiRCLtAy/84ZksBA=","sha256":"¬ë¬™√•√ë{√≤kS√ù'√Æ\u000f13uZ√æ|√ß¬ß\u0012MAz[¬Ü|√ø-¬ª¬ñ\u0013"},{"user_id":"URutwCLSHDcK/IOpBOSvwEEwO65TDITv9QGyRAQLzbo=","sha256":"√≠(¬î√íWQ\r√òr\u0005¬à¬™i`\u0000√Ç%=\u0017¬É√ä{-√è√çn√≠\u001d¬µ√ÄY"}]
GiftService.receive_message_users_sha256: translating sha256 user_id URutwCLSHDcK/IOpBOSvwEEwO65TDITv9QGyRAQLzbo= to internal user_id 2
GiftService.receive_message_users_sha256: translating sha256 user_id P4ZEqEHSYL/CCThSP5inVCDbNZYRiRCLtAy/84ZksBA= to internal user_id 3
GiftService.receive_message_users_sha256: msg.users (2) = [{"user_id":3,"sha256":"¬ë¬™√•√ë{√≤kS√ù'√Æ\u000f13uZ√æ|√ß¬ß\u0012MAz[¬Ü|√ø-¬ª¬ñ\u0013"},{"user_id":2,"sha256":"√≠(¬î√íWQ\r√òr\u0005¬à¬™i`\u0000√Ç%=\u0017¬É√ä{-√è√çn√≠\u001d¬µ√ÄY"}]
GiftService.receive_message_users_sha256: msg_users = [3,2], my_mutual_friends = [2,3], invalid_user_ids = []
GiftService.receive_message_users_sha256: sha256_hash = {"2":{"my_sha256":"√≠(¬î√íWQ\r√òr\u0005¬à¬™i`\u0000√Ç%=\u0017¬É√ä{-√è√çn√≠\u001d¬µ√ÄY","msg_sha256":"√≠(¬î√íWQ\r√òr\u0005¬à¬™i`\u0000√Ç%=\u0017¬É√ä{-√è√çn√≠\u001d¬µ√ÄY"},"3":{"my_sha256":"¬ë¬™√•√ë{√≤kS√ù'√Æ\u000f13uZ√æ|√ß¬ß\u0012MAz[¬Ü|√ø-¬ª¬ñ\u0013","msg_sha256":"¬ë¬™√•√ë{√≤kS√ù'√Æ\u000f13uZ√æ|√ß¬ß\u0012MAz[¬Ü|√ø-¬ª¬ñ\u0013"}}
GiftService.receive_message_users_sha256: mutual gifts for this device are up-to-date.
GiftService.send_messages: msg = {"mid":"14484676354400642726","msgtype":"users_sha256","users":[2,3]}
UserService.user_ids_to_remote_sha256: mutual_friends = [2,3], typeof user_ids = object
GiftService.send_message_users_sha256: users_sha256_message = {"msgtype":"users_sha256","mid":"14484676354400642726","users":[{"user_id":"ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c=","sha256":"√≠(¬î√íWQ\r√òr\u0005¬à¬™i`\u0000√Ç%=\u0017¬É√ä{-√è√çn√≠\u001d¬µ√ÄY"},{"user_id":"1ZvuCxcvwezm+pWyTqyMg/m5P0T7ql0qVNUwQpUcRKE=","sha256":"¬ë¬™√•√ë{√≤kS√ù'√Æ\u000f13uZ√æ|√ß¬ß\u0012MAz[¬Ü|√ø-¬ª¬ñ\u0013"}]}
GiftService.send_messages: unencrypted message = {"sent_at_client":1448467653252,"messages":[{"msgtype":"users_sha256","mid":"14484676354400642726","users":[{"user_id":"ITUda8On9K5dXvRVlRBUxX/JQH5A7Ly4MZ3iC5wym1c=","sha256":"√≠(¬î√íWQ\r√òr\u0005¬à¬™i`\u0000√Ç%=\u0017¬É√ä{-√è√çn√≠\u001d¬µ√ÄY"},{"user_id":"1ZvuCxcvwezm+pWyTqyMg/m5P0T7ql0qVNUwQpUcRKE=","sha256":"¬ë¬™√•√ë{√≤kS√ù'√Æ\u000f13uZ√æ|√ß¬ß\u0012MAz[¬Ü|√ø-¬ª¬ñ\u0013"}]}]}
GiftService.send_messages: message_with_envelope = {"receiver_did":"14481194806251567148","receiver_sha256":"3Rf35epojarDFzMj6laxbNhhxqyzznBcBsjJQE8BmSI=","server":false,"encryption":"sym","message":"U2FsdGVkX1/c1CEmC50zJEHQ2y93k/dn6H2SazESMWwUlBLZE3bFbzrPQd9r71cj28QcyTHZP1bpnNcTwGdjN1d938VT0gNFJOAQTbdqPHfBuTIykrx2aIoYgt6Sm7Hs3duWVCvKlzeLz7x8TqHmdyBvL1BDbVlNYgEHDOjp8mJ+I6W9I2zIiPsm49ypMRwyDahr1FxCxSDu1rgrImkCGJm9LZNwZHX8a5eK3/1QN0KryVaXGXaWf5J91b4WA8MsrzaSq6O67FnTX4laAgt7T16IbIPtlttJyC+O/HJ8y3no3BVoEOzKIobsqqCOu8/s8lQQOexdM38sKcokMZjOagYYyK4O+A0ljteqXC3q44Gnl7K5rvC0hGBJhq6JTcH8dvdIQOhBIyfHwAVk9YvxjE4NnKnKZwwVfJYA2xOH7cZFmIgw308w/ENql3xs/8QisdWKzN//E55Kmb4l7X1dyQATMnE1gQWwGAsWxL6UtJB7LrukeCLTPVeBYe+vQ3DCvGm0ffiQLU3+3eh6g1CKBA=="}
